(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{225:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}},539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var o=r(6029),n=r(225),a=r.n(n),i=r(5729),l=r.t(i,2),s=(e,t,r,o,n,a,i,l)=>{let s=document.documentElement,c=["light","dark"];function d(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&a?n.map(e=>a[e]||e):n;r?(s.classList.remove(...o),s.classList.add(a&&a[t]?a[t]:t)):s.setAttribute(e,t)}),r=t,l&&c.includes(r)&&(s.style.colorScheme=r)}if(o)d(o);else try{let e=localStorage.getItem(t)||r,o=i&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;d(o)}catch(e){}},c=["light","dark"],d="(prefers-color-scheme: dark)",u="undefined"==typeof window,m=i.createContext(void 0),f={setTheme:e=>{},themes:[]},p=()=>{var e;return null!=(e=i.useContext(m))?e:f},h=e=>i.useContext(m)?i.createElement(i.Fragment,null,e.children):i.createElement(y,{...e}),g=["light","dark"],y=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:o=!0,storageKey:n="theme",themes:a=g,defaultTheme:l=r?"system":"light",attribute:s="data-theme",value:u,children:f,nonce:p,scriptProps:h})=>{let[y,x]=i.useState(()=>b(n,l)),[T,S]=i.useState(()=>"system"===y?E():y),k=u?Object.values(u):a,R=i.useCallback(e=>{let n=e;if(!n)return;"system"===e&&r&&(n=E());let a=u?u[n]:n,i=t?w(p):null,d=document.documentElement,m=e=>{"class"===e?(d.classList.remove(...k),a&&d.classList.add(a)):e.startsWith("data-")&&(a?d.setAttribute(e,a):d.removeAttribute(e))};if(Array.isArray(s)?s.forEach(m):m(s),o){let e=c.includes(l)?l:null,t=c.includes(n)?n:e;d.style.colorScheme=t}null==i||i()},[p]),P=i.useCallback(e=>{let t="function"==typeof e?e(y):e;x(t);try{localStorage.setItem(n,t)}catch(e){}},[y]),I=i.useCallback(t=>{S(E(t)),"system"===y&&r&&!e&&R("system")},[y,e]);i.useEffect(()=>{let e=window.matchMedia(d);return e.addListener(I),I(e),()=>e.removeListener(I)},[I]),i.useEffect(()=>{let e=e=>{e.key===n&&(e.newValue?x(e.newValue):P(l))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[P]),i.useEffect(()=>{R(null!=e?e:y)},[e,y]);let j=i.useMemo(()=>({theme:y,setTheme:P,forcedTheme:e,resolvedTheme:"system"===y?T:y,themes:r?[...a,"system"]:a,systemTheme:r?T:void 0}),[y,P,e,T,r,a]);return i.createElement(m.Provider,{value:j},i.createElement(v,{forcedTheme:e,storageKey:n,attribute:s,enableSystem:r,enableColorScheme:o,defaultTheme:l,value:u,themes:a,nonce:p,scriptProps:h}),f)},v=i.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:o,enableColorScheme:n,defaultTheme:a,value:l,themes:c,nonce:d,scriptProps:u})=>{let m=JSON.stringify([r,t,a,e,c,l,o,n]).slice(1,-1);return i.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?d:"",dangerouslySetInnerHTML:{__html:`(${s.toString()})(${m})`}})}),b=(e,t)=>{let r;if(!u){try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t}},w=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},E=e=>(e||(e=window.matchMedia(d)),e.matches?"dark":"light"),x=r(2730);function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{autoFix:r=!0,logIssues:o=!0,throwOnInvalid:n=!1}=t,a=[],i=e;if(function(e){return/^https?:\/\//.test(e)||/^mailto:/.test(e)||/^tel:/.test(e)}(e)||function(e){return/^(data:|blob:|javascript:|#)/.test(e)}(e))return{valid:!0,issues:[],originalUrl:e};if(e.includes("app://")&&!e.startsWith("app://")&&(a.push("Protocol not at start of URL"),r)){let t=e.indexOf("app://");i="app://"+e.substring(t+6)}let l=e.match(/app:\/\//g)||[];l.length>1&&(a.push("Multiple protocols found (".concat(l.length," instances)")),r&&(i=i.replace(/app:\/\/.*?app:\/\//g,"app://"))),e.includes("/app://")&&(a.push("Protocol found in path"),r&&(i=i.replace(/\/app:\/\//g,"app://"))),e.includes("app:///")&&(a.push("Multiple forward slashes after protocol"),r&&(i=i.replace(/app:\/\/\/+/g,"app:///"))),/app:\/\/[^\/]*\/\//.test(e)&&(a.push("Double slashes found in URL path"),r&&(i=i.replace(/(app:\/\/[^\/]*?)\/\/+/g,"$1/"))),e.startsWith("/")&&!e.startsWith("app://")&&(a.push("Root-relative path should use app:// protocol"),r&&(i="app://"+e));let s=0===a.length;if(!s&&o&&console.warn("[URL Validation]",{originalUrl:e,issues:a,correctedUrl:r?i:void 0}),!s&&n)throw Error("Invalid app:// URL: ".concat(e,". Issues: ").concat(a.join(", ")));return{valid:s,issues:a,originalUrl:e,correctedUrl:r&&!s?i:void 0}}function S(e){return T(e,{autoFix:!0,logIssues:!1}).correctedUrl||e}function k(e){let{children:t}=e;return(0,i.useEffect)(()=>{if(void 0!==window.electronAPI){try{let e=window.location.assign.bind(window.location),t=window.location.replace.bind(window.location);try{Object.defineProperty(window.location,"assign",{value:function(t){let r=S(t);return e(r)},writable:!1,configurable:!1})}catch(e){console.warn("[URL Validation] Cannot patch location.assign in Electron, using fallback"),window.__urlValidationNavigate=function(e){let t=S(e);try{window.location.href=t}catch(e){console.warn("[URL Validation] Navigation fallback failed:",e)}}}try{Object.defineProperty(window.location,"replace",{value:function(e){let r=S(e);return t(r)},writable:!1,configurable:!1})}catch(e){console.warn("[URL Validation] Cannot patch location.replace in Electron")}try{let t=window.location.href;Object.defineProperty(window.location,"href",{get:()=>t,set(r){let o=S(r);t=o;try{e(o)}catch(e){console.warn("[URL Validation] href assignment failed:",e)}},configurable:!1})}catch(e){console.warn("[URL Validation] Cannot patch location.href in Electron")}}catch(e){console.warn("[URL Validation] Location patching failed completely:",e)}(function(){let e=()=>{if(window.__NEXT_DATA__){var e;let t=null==(e=window.next)?void 0:e.router;if(t&&t.push){let e=t.push.bind(t),r=t.replace.bind(t);t.push=function(t,r,o){return e(T(t,{autoFix:!0,logIssues:!0}).correctedUrl||t,r,o)},t.replace=function(e,t,o){return r(T(e,{autoFix:!0,logIssues:!0}).correctedUrl||e,t,o)}}}};e(),setTimeout(e,1e3)})(),function(){if(!window.fetch)return;let e=window.fetch;window.fetch=function(t,r){let o;if((o="string"==typeof t?t:t instanceof URL?t.toString():t.url).includes("app://")){let e=T(o,{autoFix:!0,logIssues:!0});e.correctedUrl&&(t="string"==typeof t?e.correctedUrl:t instanceof URL?new URL(e.correctedUrl):{...t,url:e.correctedUrl})}return e(t,r)}}()}},[]),(0,o.jsx)(o.Fragment,{children:t})}var R=r(2311),P=r(1375),I=r(9688),j=r(4309);window.__OPENCUT_STORAGE_STATE__||(window.__OPENCUT_STORAGE_STATE__={isGloballyInitializing:!1,hasGloballyInitialized:!1,instanceCount:0});let A=()=>window.__OPENCUT_STORAGE_STATE__,L=e=>{Object.assign(window.__OPENCUT_STORAGE_STATE__||{},e)},D=(0,i.createContext)(null);function C(e){let{children:t}=e,r=A(),n=Math.random().toString(36).substr(2,9);if(L({instanceCount:((null==r?void 0:r.instanceCount)||0)+1}),null==r?void 0:r.hasGloballyInitialized)return(0,o.jsx)(D.Provider,{value:{isInitialized:!0,isLoading:!1,hasSupport:!0,error:null},children:t});let[a,l]=(0,i.useState)({isInitialized:!1,isLoading:!0,hasSupport:!1,error:null});return(0,i.useEffect)(()=>{let e=R.I.getState(),t=A();if(null==t?void 0:t.hasGloballyInitialized){j.w.log("StorageProvider","SKIP_GLOBAL_ALREADY_INITIALIZED",{instanceId:n}),l({isInitialized:!0,isLoading:!1,hasSupport:P.P.isFullySupported(),error:null});return}if(e.isInitialized&&e.savedProjects.length>0){console.log("⏭️ StorageProvider ".concat(n,": Store already initialized, skipping")),j.w.log("StorageProvider","SKIP_STORE_ALREADY_INITIALIZED",{instanceId:n,projectCount:e.savedProjects.length}),L({hasGloballyInitialized:!0}),l({isInitialized:!0,isLoading:!1,hasSupport:P.P.isFullySupported(),error:null});return}if(null==t?void 0:t.isGloballyInitializing){console.log("⏳ StorageProvider ".concat(n,": Initialization already in progress, skipping")),j.w.log("StorageProvider","SKIP_INITIALIZATION_IN_PROGRESS",{instanceId:n});return}return(async()=>{L({isGloballyInitializing:!0}),l(e=>({...e,isLoading:!0}));try{let e=P.P.isFullySupported();e||I.oR.warning("Storage not fully supported. Some features may not work."),j.w.log("StorageProvider","CALLING_LOAD_ALL_PROJECTS",{source:"StorageProvider_init",instanceId:n}),await R.I.getState().loadAllProjects(),j.w.log("StorageProvider","LOAD_ALL_PROJECTS_COMPLETED",{source:"StorageProvider_init"}),l({isInitialized:!0,isLoading:!1,hasSupport:e,error:null}),L({hasGloballyInitialized:!0})}catch(e){console.error("❌ StorageProvider: Initialization failed:",e),l({isInitialized:!1,isLoading:!1,hasSupport:P.P.isFullySupported(),error:e instanceof Error?e.message:"Unknown error"})}finally{L({isGloballyInitializing:!1})}})(),()=>{console.log("\uD83D\uDDD1️ StorageProvider useEffect cleanup - component unmounting")}},[]),(0,o.jsx)(D.Provider,{value:a,children:t})}let O=e=>{let{...t}=e,{theme:r="system"}=p();return(0,o.jsx)(I.l$,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var N=r(693),F=r(6749),M=r(7627);r(6003);let _=()=>void 0!==window.electronAPI;function U(){let{tracks:e}=(0,N.A)(),{mediaItems:t}=(0,F.useMediaStore)(),{currentTime:r}=(0,M.E)(),[o,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(_()||0)&&(window.storageService=P.P,_()&&console.log("\uD83D\uDD27 Electron Storage Test:",{electronAPI:!!window.electronAPI,storageServiceAvailable:!!P.P,storageFullySupported:P.P.isFullySupported()}))},[]),null}function z(){return(0,i.useEffect)(()=>{if(window.electronAPI){console.log("\uD83D\uDD27 [HYDRATION FIX] Electron React hydration fix starting..."),window.React=l;try{let e=r(9315);window.ReactDOM=e,console.log("\uD83D\uDD27 [HYDRATION FIX] ReactDOM loaded successfully"),setTimeout(()=>{let t=document.getElementById("__next");if(t&&!t.hasChildNodes()){console.log("\uD83D\uDD27 [HYDRATION FIX] Root element empty, forcing render...");let r=e.createRoot(t),o=i.createElement("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.createElement("div",{className:"text-center",children:[i.createElement("h1",{key:"title",className:"text-2xl font-bold mb-4"},"OpenCut"),i.createElement("p",{key:"loading",className:"text-muted-foreground"},"Loading...")]})});r.render(o),console.log("✅ [HYDRATION FIX] Fallback component rendered")}},1e3)}catch(e){console.error("\uD83D\uDD27 [HYDRATION FIX] Failed to load ReactDOM:",e)}}},[]),null}class B extends i.Component{static getDerivedStateFromError(e){return console.error("\uD83D\uDD25 [ERROR-BOUNDARY] React error caught:",{error:e.message,stack:e.stack,name:e.name,timestamp:Date.now(),location:window.location.href}),{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("\uD83D\uDEA8 ERROR BOUNDARY TRIGGERED:",{error:e.message,errorInfo:t,stack:e.stack,componentStack:t.componentStack,timestamp:Date.now(),location:window.location.href}),this.setState({error:e,errorInfo:t}),this.props.onError&&this.props.onError(e,t),console.log("\uD83D\uDD27 [ERROR-BOUNDARY] Error boundary activated for Electron compatibility")}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,o.jsx)("div",{className:"min-h-screen bg-background px-5 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"max-w-md w-full text-center space-y-6",children:[(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"\uD83D\uDD27 Electron Error Recovery"}),(0,o.jsx)("p",{className:"text-muted-foreground",children:"React hydration failed, but the app is still functional"})]}),!1,(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsx)("button",{onClick:this.handleRetry,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"\uD83D\uDD04 Retry React"}),(0,o.jsx)("button",{onClick:this.handleReload,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"\uD83D\uDD04 Reload Page"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,o.jsx)("button",{onClick:this.handleNavigateProjects,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"\uD83D\uDCC1 Projects"}),(0,o.jsx)("button",{onClick:this.handleNavigateHome,className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"\uD83C\uDFE0 Home"})]})]}),(0,o.jsx)("div",{className:"text-xs text-muted-foreground bg-muted/20 p-3 rounded-lg",children:(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Electron Safe Mode:"})," Core functionality is available even when React fails to hydrate properly."]})})]})}):this.props.children}constructor(...e){super(...e),this.state={hasError:!1,error:null,errorInfo:null},this.handleRetry=()=>{console.log("\uD83D\uDD04 ERROR BOUNDARY RECOVERY ATTEMPT:",{action:"retry",timestamp:Date.now()}),this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{console.log("\uD83D\uDD04 ERROR BOUNDARY RECOVERY ATTEMPT:",{action:"reload",timestamp:Date.now()}),window.location.reload()},this.handleNavigateHome=()=>{console.log("\uD83C\uDFE0 [ERROR-BOUNDARY] Navigating to home..."),window.location.href="/"},this.handleNavigateProjects=()=>{console.log("\uD83D\uDCC1 [ERROR-BOUNDARY] Navigating to projects..."),window.location.href="/projects"}}}function H(){return(0,i.useEffect)(()=>{if(!window.electronAPI)return;console.log("\uD83D\uDD27 [ELECTRON-FIX] Applying immediate visibility fixes...");let e=()=>{let e=document.querySelectorAll('[style*="opacity:0"], [style*="opacity: 0"]');e.forEach(e=>{e instanceof HTMLElement&&(e.style.opacity="1",e.style.transform="none",e.style.visibility="visible")});let t=document.querySelector(".max-w-3xl.mx-auto.w-full.flex-1.flex.flex-col.justify-center");t instanceof HTMLElement&&(t.style.opacity="1",t.style.transform="none",t.style.visibility="visible");let r=document.querySelector("footer");r instanceof HTMLElement&&(r.style.opacity="1",r.style.transform="none",r.style.visibility="visible"),console.log("✅ [ELECTRON-FIX] Fixed visibility on ".concat(e.length," elements"))};e(),setTimeout(e,100),setTimeout(e,500),setTimeout(e,1e3);let t=new MutationObserver(()=>{e()});return t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]}),()=>t.disconnect()},[]),null}function V(e){let{children:t}=e;return(0,i.useEffect)(()=>{if(window.electronAPI)return console.log("\uD83D\uDD27 [ELECTRON-ROUTER] Setting up Electron navigation wrapper..."),console.log("\uD83D\uDD17 [ELECTRON-ROUTER] Navigation handling delegated to NAV-FIX script to avoid conflicts"),console.log("✅ [ELECTRON-ROUTER] Navigation interception enabled"),()=>{console.log("\uD83D\uDD27 [ELECTRON-ROUTER] Component cleanup - navigation handled by NAV-FIX script")}},[]),(0,o.jsx)(o.Fragment,{children:t})}function W(e){let{children:t}=e,[r,n]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{window.electronAPI?(s(!0),console.log("\uD83D\uDD27 [ELECTRON-PROVIDER] Electron environment detected"),window.React=l,n(!0),console.log("✅ [ELECTRON-PROVIDER] Hydration completed")):n(!0)},[]),a&&!r)?(0,o.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"OpenCut"}),(0,o.jsx)("p",{className:"text-muted-foreground",children:"Initializing..."})]})}):(0,o.jsx)(o.Fragment,{children:t})}function $(){if(!window.electronAPI)return;console.log("\uD83D\uDD27 [ELECTRON-FONT-FIX] Starting runtime font path fixing...");let e=e=>{try{let t=e.textContent||e.innerHTML||"",r=!1;t=(t=(t=t.replace(/@font-face\s*{[^}]*}/g,e=>e.replace(/src:\s*url\(["']?\/(.*?)["']?\)/g,(e,t)=>(r=!0,console.log("  \uD83C\uDFAF [ELECTRON-FONT-FIX] Fixed font path: /".concat(t," → ").concat(t)),'src: url("'.concat(t,'")'))))).replace(/url\(["']?\/(.*?\.(woff2?|ttf|eot|otf))["']?\)/g,(e,t)=>(r=!0,console.log("  \uD83C\uDFAF [ELECTRON-FONT-FIX] Fixed font URL: /".concat(t," → ./").concat(t)),'url("./'.concat(t,'")')))).replace(/url\(["']?\/_next\/static\/media\/(.*?\.(woff2?|ttf|eot|otf))["']?\)/g,(e,t)=>(r=!0,console.log("  \uD83C\uDFAF [ELECTRON-FONT-FIX] Fixed _next font: /_next/static/media/".concat(t," → ./_next/static/media/").concat(t)),'url("./_next/static/media/'.concat(t,'")'))),r&&(e.textContent=t,console.log("  ✅ [ELECTRON-FONT-FIX] Style element updated"))}catch(e){console.error("  ❌ [ELECTRON-FONT-FIX] Error fixing style element:",e)}},t=document.querySelectorAll("style");console.log("\uD83D\uDCC4 [ELECTRON-FONT-FIX] Found ".concat(t.length," style elements to check")),t.forEach((t,r)=>{t.textContent&&t.textContent.includes("@font-face")&&(console.log("  \uD83D\uDD0D [ELECTRON-FONT-FIX] Processing style element ".concat(r+1," with @font-face rules")),e(t))});let r=document.querySelectorAll('link[rel="preload"][as="font"]'),o=0;r.forEach(e=>{let t=e.getAttribute("href");t&&t.startsWith("/")&&(e.setAttribute("href",t.substring(1)),o++,console.log("  \uD83C\uDFAF [ELECTRON-FONT-FIX] Fixed preload link: ".concat(t," → ").concat(t.substring(1))))}),o>0&&console.log("  ✅ [ELECTRON-FONT-FIX] Fixed ".concat(o," font preload links"));let n=new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{if("STYLE"===t.nodeName)t.textContent&&t.textContent.includes("@font-face")&&(console.log("  \uD83D\uDD0D [ELECTRON-FONT-FIX] New style element detected with @font-face"),e(t));else if("LINK"===t.nodeName&&"preload"===t.rel&&"font"===t.as){let e=t.getAttribute("href");e&&e.startsWith("/")&&(t.setAttribute("href",e.substring(1)),console.log("  \uD83C\uDFAF [ELECTRON-FONT-FIX] Fixed new preload link: ".concat(e," → ").concat(e.substring(1))))}})})});return n.observe(document.head,{childList:!0,subtree:!0}),console.log("✅ [ELECTRON-FONT-FIX] Runtime font path fixing initialized"),console.log("\uD83D\uDC40 [ELECTRON-FONT-FIX] Watching for new style elements..."),()=>{n.disconnect(),console.log("\uD83D\uDED1 [ELECTRON-FONT-FIX] Font path observer disconnected")}}function G(e){let{Component:t,pageProps:r}=e;return(0,o.jsx)(B,{onError:(e,t)=>{console.error("\uD83D\uDD25 [APP] React error in Electron app:",e,t),window.electronAPI&&console.log("\uD83D\uDD27 [APP] Error occurred in Electron environment")},children:(0,o.jsx)(W,{children:(0,o.jsx)(V,{children:(0,o.jsxs)("div",{className:"".concat(a().className," font-sans antialiased"),children:[(0,o.jsx)(h,{attribute:"class",forcedTheme:"dark",children:(0,o.jsx)(x.Bc,{children:(0,o.jsx)(k,{children:(0,o.jsxs)(C,{children:[(0,o.jsx)(t,{...r}),(0,o.jsx)(O,{}),(0,o.jsx)(U,{})]})})})}),(0,o.jsx)(z,{}),(0,o.jsx)(H,{})]})})})})}r(6998),window.electronAPI&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",$):$()),window.electronAPI},693:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var o=r(8106),n=r(6202),a=r(1559),i=r(6749),l=r(1375),s=r(2311),c=r(2185);let d=(e,t)=>{let r=e.replace(/ \(left\)$/,"").replace(/ \(right\)$/,"").replace(/ \(audio\)$/,"").replace(/ \(split \d+\)$/,"");return"".concat(r," (").concat(t,")")},u=(0,o.v)((e,t)=>{let o=t=>{let r=(0,n.zb)(t),o=(0,n.Oy)(r);e({_tracks:r,tracks:o})},u=async()=>{let e=s.I.getState().activeProject;if(e)try{await l.P.saveTimeline(e.id,t()._tracks)}catch(e){console.error("Failed to auto-save timeline:",e)}},m=e=>{o(e),setTimeout(u,100)},f=(0,n.zb)([]),p=(0,n.Oy)(f);return{_tracks:f,tracks:p,history:[],redoStack:[],selectedElements:[],getSortedTracks:()=>{let{_tracks:e}=t(),r=(0,n.zb)(e);return(0,n.Oy)(r)},pushHistory:()=>{let{_tracks:r,history:o}=t();e({history:[...o,JSON.parse(JSON.stringify(r))],redoStack:[]})},undo:()=>{let{history:r,redoStack:o,_tracks:n}=t();0!==r.length&&(m(r[r.length-1]),e({history:r.slice(0,-1),redoStack:[...o,JSON.parse(JSON.stringify(n))]}))},selectElement:function(t,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e(e=>{let n=e.selectedElements.some(e=>e.trackId===t&&e.elementId===r);return o?n?{selectedElements:e.selectedElements.filter(e=>e.trackId!==t||e.elementId!==r)}:{selectedElements:[...e.selectedElements,{trackId:t,elementId:r}]}:{selectedElements:[{trackId:t,elementId:r}]}})},deselectElement:(t,r)=>{e(e=>({selectedElements:e.selectedElements.filter(e=>e.trackId!==t||e.elementId!==r)}))},clearSelectedElements:()=>{e({selectedElements:[]})},setSelectedElements:t=>e({selectedElements:t}),addTrack:e=>{t().pushHistory();let r={id:(0,c.l)(),name:"media"===e?"Media Track":"text"===e?"Text Track":"audio"===e?"Audio Track":"Track",type:e,elements:[],muted:!1};return m([...t()._tracks,r]),r.id},insertTrackAt:(e,r)=>{t().pushHistory();let o={id:(0,c.l)(),name:"media"===e?"Media Track":"text"===e?"Text Track":"audio"===e?"Audio Track":"Track",type:e,elements:[],muted:!1},n=[...t()._tracks];return n.splice(r,0,o),m(n),o.id},removeTrack:e=>{t().pushHistory(),m(t()._tracks.filter(t=>t.id!==e))},addElementToTrack:(e,r)=>{t().pushHistory();let o=t()._tracks.find(t=>t.id===e);if(!o)return void console.error("Track not found:",e);let l=(0,n.aI)(r,o);if(!l.isValid)return void console.error(l.errorMessage);if("media"===r.type&&!r.mediaId)return void console.error("Media element must have mediaId");if("text"===r.type&&!r.content)return void console.error("Text element must have content");let d=t()._tracks.reduce((e,t)=>e+t.elements.length,0),u={...r,id:(0,c.l)(),startTime:r.startTime||0,trimStart:0,trimEnd:0};if(console.log("➕ NEW ELEMENT CREATED:",{operation:"addElementToTrack",elementId:u.id,trackId:e,duration:u.duration,trimStart:u.trimStart,trimEnd:u.trimEnd,type:u.type,timestamp:new Date().toISOString()}),0===d&&"media"===u.type){let e=i.useMediaStore.getState().mediaItems.find(e=>e.id===u.mediaId);if(e&&("image"===e.type||"video"===e.type)&&a.U.getState().setCanvasSizeFromAspectRatio((0,i.getMediaAspectRatio)(e)),e&&"video"===e.type&&e.fps){let t=s.I.getState();t.activeProject&&t.updateProjectFps(e.fps)}}m(t()._tracks.map(t=>t.id===e?{...t,elements:[...t.elements,u]}:t))},removeElementFromTrack:(e,r)=>{t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.filter(e=>e.id!==r)}:t).filter(e=>e.elements.length>0))},moveElementToTrack:(e,r,o)=>{t().pushHistory();let a=t()._tracks.find(t=>t.id===e),i=t()._tracks.find(e=>e.id===r),l=null==a?void 0:a.elements.find(e=>e.id===o);if(!l||!i)return;let s=(0,n.aI)(l,i);if(!s.isValid)return void console.error(s.errorMessage);m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.filter(e=>e.id!==o)}:t.id===r?{...t,elements:[...t.elements,l]}:t).filter(e=>e.elements.length>0))},updateElementTrim:(e,r,o,n)=>{var a;console.log("\uD83D\uDD27 TRIM UPDATE DETECTED:",{trackId:e,elementId:r,trimStart:o,trimEnd:n,timestamp:new Date().toISOString(),stackTrace:Error().stack});let i=null==(a=t()._tracks.find(t=>t.id===e))?void 0:a.elements.find(e=>e.id===r);if(!i)return void console.error("\uD83D\uDEA8 TRIM UPDATE FAILED: Element not found",{trackId:e,elementId:r});let l=Math.max(0,o||0),s=Math.max(0,Math.min(n||0,i.duration-l-.1));(o!==l||n!==s)&&console.log("\uD83D\uDD27 SANITIZING TRIM VALUES:",{elementId:r,duration:i.duration,requested:{trimStart:o,trimEnd:n},sanitized:{trimStart:l,trimEnd:s},reason:"Preventing invalid trim values"}),s>0&&console.log("\uD83D\uDEA8 NON-ZERO TRIM END BEING SET:",s),t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r?{...e,trimStart:l,trimEnd:s}:e)}:t))},updateElementDuration:(e,r,o)=>{t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r?{...e,duration:o}:e)}:t))},updateElementStartTime:(e,r,o)=>{t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r?{...e,startTime:o}:e)}:t))},toggleTrackMute:e=>{t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,muted:!t.muted}:t))},updateTextElement:(e,r,o)=>{t().pushHistory(),m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r&&"text"===e.type?{...e,...o}:e)}:t))},splitElement:(e,r,o)=>{let{_tracks:n}=t(),a=n.find(t=>t.id===e),i=null==a?void 0:a.elements.find(e=>e.id===r);if(!i)return null;let l=i.startTime,s=i.startTime+(i.duration-i.trimStart-i.trimEnd);if(o<=l||o>=s)return null;t().pushHistory();let u=o-i.startTime,f=i.duration-i.trimStart-i.trimEnd-u,p=(0,c.l)();return m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.flatMap(e=>e.id===r?[{...e,trimEnd:(()=>{let t=e.trimEnd+f;return console.log("\uD83D\uDD2A SPLIT OPERATION - Setting trimEnd:",{operation:"split",elementId:e.id,originalTrimEnd:e.trimEnd,secondDuration:f,newTrimEnd:t,elementDuration:e.duration,splitTime:o,timestamp:new Date().toISOString()}),t})(),name:d(e.name,"left")},{...e,id:p,startTime:o,trimStart:e.trimStart+u,name:d(e.name,"right")}]:[e])}:t)),p},splitAndKeepLeft:(e,r,o)=>{let{_tracks:n}=t(),a=n.find(t=>t.id===e),i=null==a?void 0:a.elements.find(e=>e.id===r);if(!i)return;let l=i.startTime,s=i.startTime+(i.duration-i.trimStart-i.trimEnd);if(o<=l||o>=s)return;t().pushHistory();let c=o-i.startTime,u=i.duration-i.trimStart-i.trimEnd-c;m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r?{...e,trimEnd:(()=>{let t=e.trimEnd+u;return console.log("✂️ SPLIT AT TIME OPERATION - Setting trimEnd:",{operation:"splitAtTime",elementId:e.id,originalTrimEnd:e.trimEnd,durationToRemove:u,newTrimEnd:t,elementDuration:e.duration,splitTime:o,relativeTime:c,timestamp:new Date().toISOString()}),t})(),name:d(e.name,"left")}:e)}:t))},splitAndKeepRight:(e,r,o)=>{let{_tracks:n}=t(),a=n.find(t=>t.id===e),i=null==a?void 0:a.elements.find(e=>e.id===r);if(!i)return;let l=i.startTime,s=i.startTime+(i.duration-i.trimStart-i.trimEnd);if(o<=l||o>=s)return;t().pushHistory();let c=o-i.startTime;m(t()._tracks.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===r?{...e,startTime:o,trimStart:e.trimStart+c,name:d(e.name,"right")}:e)}:t))},separateAudio:(e,r)=>{let{_tracks:o}=t(),n=o.find(t=>t.id===e),a=null==n?void 0:n.elements.find(e=>e.id===r);if(!a||(null==n?void 0:n.type)!=="media")return null;t().pushHistory();let i=o.find(e=>"audio"===e.type),l=(0,c.l)();if(i)m(t()._tracks.map(e=>e.id===i.id?{...e,elements:[...e.elements,{...a,id:l,name:d(a.name,"audio")}]}:e));else{let e={id:(0,c.l)(),name:"Audio Track",type:"audio",elements:[{...a,id:l,name:d(a.name,"audio")}],muted:!1};m([...t()._tracks,e])}return l},replaceElementMedia:async(e,o,n)=>{let{_tracks:a}=t(),l=a.find(t=>t.id===e),c=null==l?void 0:l.elements.find(e=>e.id===o);if(!c||"media"!==c.type)return!1;try{let l=i.useMediaStore.getState(),c=s.I.getState();if(!c.activeProject)return!1;let{getFileType:d,getImageDimensions:u,generateVideoThumbnail:f,getMediaDuration:p}=await Promise.resolve().then(r.bind(r,6749)),h=d(n);if(!h)return!1;let g={name:n.name,type:h,file:n,url:URL.createObjectURL(n)};if("image"===h){let{width:e,height:t}=await u(n);g.width=e,g.height=t}else if("video"===h){let[e,{thumbnailUrl:t,width:r,height:o}]=await Promise.all([p(n),f(n)]);g.duration=e,g.thumbnailUrl=t,g.width=r,g.height=o}else"audio"===h&&(g.duration=await p(n));await l.addMediaItem(c.activeProject.id,g);let y=l.mediaItems.find(e=>e.file===n);if(!y)return!1;return t().pushHistory(),m(a.map(t=>t.id===e?{...t,elements:t.elements.map(e=>e.id===o?{...e,mediaId:y.id,name:y.name,duration:y.duration||e.duration}:e)}:t)),!0}catch(e){return console.log(JSON.stringify({error:"Failed to replace element media",details:e})),!1}},getTotalDuration:()=>{let{_tracks:e}=t();return 0===e.length?0:Math.max(...e.map(e=>e.elements.reduce((e,t)=>Math.max(e,t.startTime+t.duration-t.trimStart-t.trimEnd),0)),0)},redo:()=>{let{redoStack:r}=t();0!==r.length&&(m(r[r.length-1]),e({redoStack:r.slice(0,-1)}))},dragState:{isDragging:!1,elementId:null,trackId:null,startMouseX:0,startElementTime:0,clickOffsetTime:0,currentTime:0},setDragState:t=>e(e=>({dragState:{...e.dragState,...t}})),startDrag:(t,r,o,n,a)=>{console.log("\uD83C\uDFEA TIMELINE-STORE: startDrag called:",{elementId:t,trackId:r,startMouseX:o,startElementTime:n,clickOffsetTime:a,isDragging:!0}),e({dragState:{isDragging:!0,elementId:t,trackId:r,startMouseX:o,startElementTime:n,clickOffsetTime:a,currentTime:n}})},updateDragTime:t=>{e(e=>({dragState:{...e.dragState,currentTime:t}}))},endDrag:()=>{e({dragState:{isDragging:!1,elementId:null,trackId:null,startMouseX:0,startElementTime:0,clickOffsetTime:0,currentTime:0}})},fixCorruptedTimeline:()=>{console.log("\uD83D\uDD27 MANUAL TIMELINE FIX: Starting sanitization of current timeline"),m(t()._tracks.map(e=>({...e,elements:e.elements.map(e=>{let t,r=e.trimEnd,o=e.trimStart;console.log("\uD83D\uDD0D CHECKING ELEMENT:",{elementId:e.id,duration:e.duration,originalTrimStart:o,originalTrimEnd:r});let n=Math.max(0,e.trimStart||0);return e.trimEnd>e.duration?(console.log("\uD83D\uDEA8 FIXING: trimEnd exceeds duration"),t=0):e.trimEnd>.5*e.duration?(console.log("\uD83D\uDEA8 FIXING: suspicious trimEnd removes >50% content",{percentageRemoved:(e.trimEnd/e.duration*100).toFixed(1)+"%"}),t=0):t=e.trimEnd,(r!==t||o!==n)&&console.log("✅ FIXED ELEMENT:",{elementId:e.id,before:{trimStart:o,trimEnd:r},after:{trimStart:n,trimEnd:t}}),{...e,trimStart:n,trimEnd:t}})}))),console.log("✅ MANUAL TIMELINE FIX COMPLETED")},loadProjectTimeline:async t=>{try{let r=await l.P.loadTimeline(t);if(r){let e=r.map(e=>({...e,elements:e.elements.map(e=>{let t,r=e.trimEnd,o=e.trimStart,n=Math.max(0,e.trimStart||0);return e.trimEnd>e.duration?(console.log("\uD83D\uDEA8 CORRUPT DATA DETECTED: trimEnd exceeds duration, resetting to 0"),t=0):e.trimEnd>.5*e.duration?(console.log("\uD83D\uDEA8 SUSPICIOUS TRIM DATA: trimEnd removes >50% of content, resetting to 0",{trimEnd:e.trimEnd,duration:e.duration,percentageRemoved:(e.trimEnd/e.duration*100).toFixed(1)+"%"}),t=0):t=Math.max(0,Math.min(e.trimEnd||0,e.duration-n-.1)),(r!==t||o!==n)&&console.log("\uD83D\uDD27 SANITIZING CORRUPT TRIM VALUES:",{elementId:e.id,duration:e.duration,original:{trimStart:o,trimEnd:r},sanitized:{trimStart:n,trimEnd:t},reason:r>e.duration?"trimEnd exceeds duration":"invalid trim values"}),{...e,trimStart:n,trimEnd:t}})})),t=e.flatMap(e=>e.elements.filter((t,o)=>{var n;let a=null==(n=r.find(t=>t.id===e.id))?void 0:n.elements[o];return a&&(a.trimEnd!==t.trimEnd||a.trimStart!==t.trimStart)}));t.length>0&&console.log("✅ CORRECTED CORRUPTED TIMELINE ELEMENTS:",t.length),o(e)}else{let e=(0,n.zb)([]);o(e)}e({history:[],redoStack:[]})}catch(t){console.error("Failed to load timeline:",t),o((0,n.zb)([])),e({history:[],redoStack:[]})}},saveProjectTimeline:async e=>{try{await l.P.saveTimeline(e,t()._tracks)}catch(e){console.error("Failed to save timeline:",e)}},clearTimeline:()=>{o((0,n.zb)([])),e({history:[],redoStack:[],selectedElements:[]})}}});window.fixTimelineTrimIssue=()=>{console.log("\uD83D\uDD27 GLOBAL FIX: Attempting to fix timeline trim issue"),u.getState(),console.log("Timeline fix functionality temporarily disabled for build")},window.checkTimelineDuration=()=>{console.log("\uD83D\uDD0D CHECKING TIMELINE DURATION:");let e=u.getState(),t=e.getTotalDuration();return e._tracks.forEach((e,t)=>{console.log("Track ".concat(t+1,":"),e.elements.length,"elements"),e.elements.forEach((e,t)=>{console.log("  Element ".concat(t+1,":"),{duration:e.duration,trimStart:e.trimStart,trimEnd:e.trimEnd,effectiveDuration:e.duration-(e.trimStart||0)-(e.trimEnd||0)})})}),t},window.debugExportDuration=()=>{console.log("\uD83D\uDD0D EXPORT DURATION DEBUG:");let e=window.checkTimelineDuration();return console.log("Timeline should pass this duration to export:",e),e}},1375:(e,t,r)=>{"use strict";r.d(t,{P:()=>c});class o{async getDB(){return new Promise((e,t)=>{let r=indexedDB.open(this.dbName,this.version);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.storeName)||t.createObjectStore(this.storeName,{keyPath:"id"})}})}async get(e){let t=(await this.getDB()).transaction([this.storeName],"readonly").objectStore(this.storeName);return new Promise((r,o)=>{let n=t.get(e);n.onerror=()=>o(n.error),n.onsuccess=()=>r(n.result||null)})}async set(e,t){let r=(await this.getDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName);return new Promise((o,n)=>{let a=r.put({id:e,...t});a.onerror=()=>n(a.error),a.onsuccess=()=>o()})}async remove(e){let t=(await this.getDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName);return new Promise((r,o)=>{let n=t.delete(e);n.onerror=()=>o(n.error),n.onsuccess=()=>r()})}async list(){let e=(await this.getDB()).transaction([this.storeName],"readonly").objectStore(this.storeName);return new Promise((t,r)=>{let o=e.getAllKeys();o.onerror=()=>r(o.error),o.onsuccess=()=>t(o.result)})}async clear(){let e=(await this.getDB()).transaction([this.storeName],"readwrite").objectStore(this.storeName);return new Promise((t,r)=>{let o=e.clear();o.onerror=()=>r(o.error),o.onsuccess=()=>t()})}constructor(e,t,r=1){this.dbName=e,this.storeName=t,this.version=r}}class n{async getDirectory(){let e=await navigator.storage.getDirectory();return await e.getDirectoryHandle(this.directoryName,{create:!0})}async get(e){try{let t=await this.getDirectory(),r=await t.getFileHandle(e);return await r.getFile()}catch(e){if("NotFoundError"===e.name)return null;throw e}}async set(e,t){let r=await this.getDirectory(),o=await r.getFileHandle(e,{create:!0}),n=await o.createWritable();await n.write(t),await n.close()}async remove(e){try{let t=await this.getDirectory();await t.removeEntry(e)}catch(e){if("NotFoundError"!==e.name)throw e}}async list(){let e=await this.getDirectory(),t=[];for await(let r of e.keys())t.push(r);return t}async clear(){let e=await this.getDirectory();for await(let t of e.keys())await e.removeEntry(t)}static isSupported(){return"storage"in navigator&&"getDirectory"in navigator.storage}constructor(e="media"){this.directoryName=e}}class a{async get(e){try{return this.getFromIndexedDB(e)}catch(e){return console.warn("Electron file operations not implemented yet, using IndexedDB fallback"),null}}async set(e,t){try{await this.setToIndexedDB(e,t)}catch(e){throw console.warn("Electron file operations not implemented yet, using IndexedDB fallback"),e}}async remove(e){try{await this.removeFromIndexedDB(e)}catch(e){console.warn("Failed to remove file from IndexedDB fallback")}}async list(){try{return await this.listFromIndexedDB()}catch(e){return console.warn("Failed to list files from IndexedDB fallback"),[]}}async clear(){try{await this.clearIndexedDB()}catch(e){console.warn("Failed to clear IndexedDB fallback")}}async getFromIndexedDB(e){let t="electron-media-".concat(this.directoryName),r=(await this.openDB(t)).transaction(["files"],"readonly").objectStore("files"),o=await this.promisifyRequest(r.get(e));return o&&o.fileData?new File([new Blob([new Uint8Array(o.fileData)],{type:o.mimeType})],o.filename,{type:o.mimeType}):null}async setToIndexedDB(e,t){let r="electron-media-".concat(this.directoryName),o=await t.arrayBuffer(),n={key:e,filename:t.name,mimeType:t.type,size:t.size,fileData:o,lastModified:t.lastModified},a=(await this.openDB(r)).transaction(["files"],"readwrite"),i=a.objectStore("files").put(n);await new Promise((e,t)=>{i.onsuccess=()=>e(),i.onerror=()=>t(i.error),a.onerror=()=>t(a.error),a.onabort=()=>t(Error("Transaction aborted"))})}async removeFromIndexedDB(e){let t="electron-media-".concat(this.directoryName),r=(await this.openDB(t)).transaction(["files"],"readwrite").objectStore("files");await this.promisifyRequest(r.delete(e))}async listFromIndexedDB(){let e="electron-media-".concat(this.directoryName),t=(await this.openDB(e)).transaction(["files"],"readonly").objectStore("files");return await this.promisifyRequest(t.getAllKeys())}async clearIndexedDB(){let e="electron-media-".concat(this.directoryName),t=(await this.openDB(e)).transaction(["files"],"readwrite").objectStore("files");await this.promisifyRequest(t.clear())}openDB(e){return new Promise((t,r)=>{let o=indexedDB.open(e,1);o.onerror=()=>r(o.error),o.onsuccess=()=>t(o.result),o.onupgradeneeded=()=>{let e=o.result;e.objectStoreNames.contains("files")||e.createObjectStore("files",{keyPath:"key"}).createIndex("filename","filename",{unique:!1})}})}promisifyRequest(e){return new Promise((t,r)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>r(e.error)})}static isSupported(){return!!window.electronAPI||"storage"in navigator&&"getDirectory"in navigator.storage}constructor(e="media"){this.directoryName=e}}var i=r(3601);let l=()=>!!(void 0!==window.electronAPI||"true"===i.env.NEXT_PUBLIC_ELECTRON||navigator.userAgent.toLowerCase().includes("electron")||void 0!==window.require||document.body&&document.body.hasAttribute("data-electron"));class s{getProjectMediaAdapters(e){return{mediaMetadataAdapter:new o("".concat(this.config.mediaDb,"-").concat(e),"media-metadata",this.config.version),mediaFilesAdapter:l()?new a("media-files-".concat(e)):new n("media-files-".concat(e))}}getProjectTimelineAdapter(e){return new o("".concat(this.config.timelineDb,"-").concat(e),"timeline",this.config.version)}async saveProject(e){let t={id:e.id,name:e.name,thumbnail:e.thumbnail,createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt.toISOString(),backgroundColor:e.backgroundColor,backgroundType:e.backgroundType,blurIntensity:e.blurIntensity};try{await this.projectsAdapter.set(e.id,t)}catch(e){throw e}}async loadProject(e){let t=await this.projectsAdapter.get(e);return t?{id:t.id,name:t.name,thumbnail:t.thumbnail,createdAt:new Date(t.createdAt),updatedAt:new Date(t.updatedAt),backgroundColor:t.backgroundColor,backgroundType:t.backgroundType,blurIntensity:t.blurIntensity}:null}async loadAllProjects(){let e=await this.projectsAdapter.list(),t=[];for(let r of e){let e=await this.loadProject(r);e&&t.push(e)}return t.sort((e,t)=>t.updatedAt.getTime()-e.updatedAt.getTime())}async deleteProject(e){await this.projectsAdapter.remove(e)}async saveMediaItem(e,t){var r,o;let{mediaMetadataAdapter:n,mediaFilesAdapter:a}=this.getProjectMediaAdapters(e);t.file&&await a.set(t.id,t.file);let i={id:t.id,name:t.name,type:t.type,size:(null==(r=t.file)?void 0:r.size)||0,lastModified:(null==(o=t.file)?void 0:o.lastModified)||Date.now(),width:t.width,height:t.height,duration:t.duration};await n.set(t.id,i)}async loadMediaItem(e,t){let{mediaMetadataAdapter:r,mediaFilesAdapter:o}=this.getProjectMediaAdapters(e),[n,a]=await Promise.all([o.get(t),r.get(t)]);if(!n||!a)return null;let i=new File([n],a.name,{type:a.type,lastModified:a.lastModified}),l=URL.createObjectURL(i);return{id:a.id,name:a.name,type:a.type,file:i,url:l,width:a.width,height:a.height,duration:a.duration}}async loadAllMediaItems(e){let{mediaMetadataAdapter:t}=this.getProjectMediaAdapters(e),r=await t.list(),o=[];for(let t of r){let r=await this.loadMediaItem(e,t);r&&o.push(r)}return o}async deleteMediaItem(e,t){let{mediaMetadataAdapter:r,mediaFilesAdapter:o}=this.getProjectMediaAdapters(e);await Promise.all([o.remove(t),r.remove(t)])}async deleteProjectMedia(e){let{mediaMetadataAdapter:t,mediaFilesAdapter:r}=this.getProjectMediaAdapters(e);await Promise.all([t.clear(),r.clear()])}async saveTimeline(e,t){let r=this.getProjectTimelineAdapter(e),o={tracks:t,lastModified:new Date().toISOString()};await r.set("timeline",o)}async loadTimeline(e){let t=this.getProjectTimelineAdapter(e),r=await t.get("timeline");return r?r.tracks:null}async deleteProjectTimeline(e){let t=this.getProjectTimelineAdapter(e);await t.remove("timeline")}async clearAllData(){await this.projectsAdapter.clear()}async getStorageInfo(){return{projects:(await this.projectsAdapter.list()).length,isOPFSSupported:this.isOPFSSupported(),isIndexedDBSupported:this.isIndexedDBSupported()}}async getProjectStorageInfo(e){let{mediaMetadataAdapter:t}=this.getProjectMediaAdapters(e),r=this.getProjectTimelineAdapter(e),[o,n]=await Promise.all([t.list(),r.get("timeline")]);return{mediaItems:o.length,hasTimeline:!!n}}isOPFSSupported(){return!!l()||n.isSupported()}isIndexedDBSupported(){return"indexedDB"in window}isFullySupported(){return this.isIndexedDBSupported()&&this.isOPFSSupported()}constructor(){this.config={projectsDb:"video-editor-projects",mediaDb:"video-editor-media",timelineDb:"video-editor-timelines",version:1},this.projectsAdapter=new o(this.config.projectsDb,"projects",this.config.version)}}let c=new s},1559:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var o=r(8106);let n=[{name:"16:9",width:1920,height:1080},{name:"9:16",width:1080,height:1920},{name:"1:1",width:1080,height:1080},{name:"4:3",width:1440,height:1080}],a=e=>{let t=n[0],r=Math.abs(e-t.width/t.height);for(let o of n){let n=Math.abs(e-o.width/o.height);n<r&&(r=n,t=o)}if(Math.abs(e-t.width/t.height)>.1)if(e>1)return{width:1920,height:Math.round(1920/e)};else return{width:Math.round(1080*e),height:1080};return{width:t.width,height:t.height}},i=(0,o.v)((e,t)=>({isInitializing:!0,isPanelsReady:!1,canvasSize:{width:1920,height:1080},canvasMode:"preset",canvasPresets:n,setInitializing:t=>{e({isInitializing:t})},setPanelsReady:t=>{e({isPanelsReady:t})},initializeApp:async()=>{try{e({isInitializing:!0,isPanelsReady:!1}),await new Promise(e=>setTimeout(e,10)),e({isPanelsReady:!0,isInitializing:!1})}catch(t){console.error("❌ EDITOR STORE INIT ERROR:",t),e({isPanelsReady:!0,isInitializing:!1})}},setCanvasSize:t=>{e({canvasSize:t,canvasMode:"preset"})},setCanvasSizeToOriginal:t=>{e({canvasSize:a(t),canvasMode:"original"})},setCanvasSizeFromAspectRatio:t=>{e({canvasSize:a(t),canvasMode:"custom"})}}))},2185:(e,t,r)=>{"use strict";r.d(t,{cn:()=>ed,l:()=>eu});let o=e=>{let t=l(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:e=>{let r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),n(r,t)||i(e)},getConflictingClassGroupIds:(e,t)=>{let n=r[e]||[];return t&&o[e]?[...n,...o[e]]:n}}},n=(e,t)=>{if(0===e.length)return t.classGroupId;let r=e[0],o=t.nextPart.get(r),a=o?n(e.slice(1),o):void 0;if(a)return a;if(0===t.validators.length)return;let i=e.join("-");return t.validators.find(({validator:e})=>e(i))?.classGroupId},a=/^\[(.+)\]$/,i=e=>{if(a.test(e)){let t=a.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},l=e=>{let{theme:t,classGroups:r}=e,o={nextPart:new Map,validators:[]};for(let e in r)s(r[e],o,e,t);return o},s=(e,t,r,o)=>{e.forEach(e=>{if("string"==typeof e){(""===e?t:c(t,e)).classGroupId=r;return}if("function"==typeof e)return d(e)?void s(e(o),t,r,o):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,n])=>{s(n,c(t,e),r,o)})})},c=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},d=e=>e.isThemeGetter,u=e=>{if(e<1)return{get:()=>void 0,set:()=>{}};let t=0,r=new Map,o=new Map,n=(n,a)=>{r.set(n,a),++t>e&&(t=0,o=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=o.get(e))?(n(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):n(e,t)}}},m=e=>{let{prefix:t,experimentalParseClassName:r}=e,o=e=>{let t,r=[],o=0,n=0,a=0;for(let i=0;i<e.length;i++){let l=e[i];if(0===o&&0===n){if(":"===l){r.push(e.slice(a,i)),a=i+1;continue}if("/"===l){t=i;continue}}"["===l?o++:"]"===l?o--:"("===l?n++:")"===l&&n--}let i=0===r.length?e:e.substring(a),l=f(i);return{modifiers:r,hasImportantModifier:l!==i,baseClassName:l,maybePostfixModifierPosition:t&&t>a?t-a:void 0}};if(t){let e=t+":",r=o;o=t=>t.startsWith(e)?r(t.substring(e.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:t,maybePostfixModifierPosition:void 0}}if(r){let e=o;o=t=>r({className:t,parseClassName:e})}return o},f=e=>e.endsWith("!")?e.substring(0,e.length-1):e.startsWith("!")?e.substring(1):e,p=e=>{let t=Object.fromEntries(e.orderSensitiveModifiers.map(e=>[e,!0]));return e=>{if(e.length<=1)return e;let r=[],o=[];return e.forEach(e=>{"["===e[0]||t[e]?(r.push(...o.sort(),e),o=[]):o.push(e)}),r.push(...o.sort()),r}},h=e=>({cache:u(e.cacheSize),parseClassName:m(e),sortModifiers:p(e),...o(e)}),g=/\s+/,y=(e,t)=>{let{parseClassName:r,getClassGroupId:o,getConflictingClassGroupIds:n,sortModifiers:a}=t,i=[],l=e.trim().split(g),s="";for(let e=l.length-1;e>=0;e-=1){let t=l[e],{isExternal:c,modifiers:d,hasImportantModifier:u,baseClassName:m,maybePostfixModifierPosition:f}=r(t);if(c){s=t+(s.length>0?" "+s:s);continue}let p=!!f,h=o(p?m.substring(0,f):m);if(!h){if(!p||!(h=o(m))){s=t+(s.length>0?" "+s:s);continue}p=!1}let g=a(d).join(":"),y=u?g+"!":g,v=y+h;if(i.includes(v))continue;i.push(v);let b=n(h,p);for(let e=0;e<b.length;++e){let t=b[e];i.push(y+t)}s=t+(s.length>0?" "+s:s)}return s};function v(){let e,t,r=0,o="";for(;r<arguments.length;)(e=arguments[r++])&&(t=b(e))&&(o&&(o+=" "),o+=t);return o}let b=e=>{let t;if("string"==typeof e)return e;let r="";for(let o=0;o<e.length;o++)e[o]&&(t=b(e[o]))&&(r&&(r+=" "),r+=t);return r},w=e=>{let t=t=>t[e]||[];return t.isThemeGetter=!0,t},E=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,x=/^\((?:(\w[\w-]*):)?(.+)\)$/i,T=/^\d+\/\d+$/,S=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,R=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,P=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,j=e=>T.test(e),A=e=>!!e&&!Number.isNaN(Number(e)),L=e=>!!e&&Number.isInteger(Number(e)),D=e=>e.endsWith("%")&&A(e.slice(0,-1)),C=e=>S.test(e),O=()=>!0,N=e=>k.test(e)&&!R.test(e),F=()=>!1,M=e=>P.test(e),_=e=>I.test(e),U=e=>!B(e)&&!X(e),z=e=>ee(e,en,F),B=e=>E.test(e),H=e=>ee(e,ea,N),V=e=>ee(e,ei,A),W=e=>ee(e,er,F),$=e=>ee(e,eo,_),G=e=>ee(e,es,M),X=e=>x.test(e),Y=e=>et(e,ea),J=e=>et(e,el),q=e=>et(e,er),K=e=>et(e,en),Z=e=>et(e,eo),Q=e=>et(e,es,!0),ee=(e,t,r)=>{let o=E.exec(e);return!!o&&(o[1]?t(o[1]):r(o[2]))},et=(e,t,r=!1)=>{let o=x.exec(e);return!!o&&(o[1]?t(o[1]):r)},er=e=>"position"===e||"percentage"===e,eo=e=>"image"===e||"url"===e,en=e=>"length"===e||"size"===e||"bg-size"===e,ea=e=>"length"===e,ei=e=>"number"===e,el=e=>"family-name"===e,es=e=>"shadow"===e;Symbol.toStringTag;let ec=function(e,...t){let r,o,n,a=function(l){return o=(r=h(t.reduce((e,t)=>t(e),e()))).cache.get,n=r.cache.set,a=i,i(l)};function i(e){let t=o(e);if(t)return t;let a=y(e,r);return n(e,a),a}return function(){return a(v.apply(null,arguments))}}(()=>{let e=w("color"),t=w("font"),r=w("text"),o=w("font-weight"),n=w("tracking"),a=w("leading"),i=w("breakpoint"),l=w("container"),s=w("spacing"),c=w("radius"),d=w("shadow"),u=w("inset-shadow"),m=w("text-shadow"),f=w("drop-shadow"),p=w("blur"),h=w("perspective"),g=w("aspect"),y=w("ease"),v=w("animate"),b=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],x=()=>[...E(),X,B],T=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],k=()=>[X,B,s],R=()=>[j,"full","auto",...k()],P=()=>[L,"none","subgrid",X,B],I=()=>["auto",{span:["full",L,X,B]},L,X,B],N=()=>[L,"auto",X,B],F=()=>["auto","min","max","fr",X,B],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],_=()=>["start","end","center","stretch","center-safe","end-safe"],ee=()=>["auto",...k()],et=()=>[j,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...k()],er=()=>[e,X,B],eo=()=>[...E(),q,W,{position:[X,B]}],en=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ea=()=>["auto","cover","contain",K,z,{size:[X,B]}],ei=()=>[D,Y,H],el=()=>["","none","full",c,X,B],es=()=>["",A,Y,H],ec=()=>["solid","dashed","dotted","double"],ed=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],eu=()=>[A,D,q,W],em=()=>["","none",p,X,B],ef=()=>["none",A,X,B],ep=()=>["none",A,X,B],eh=()=>[A,X,B],eg=()=>[j,"full",...k()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[C],breakpoint:[C],color:[O],container:[C],"drop-shadow":[C],ease:["in","out","in-out"],font:[U],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[C],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[C],shadow:[C],spacing:["px",A],text:[C],"text-shadow":[C],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",j,B,X,g]}],container:["container"],columns:[{columns:[A,B,X,l]}],"break-after":[{"break-after":b()}],"break-before":[{"break-before":b()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[L,"auto",X,B]}],basis:[{basis:[j,"full","auto",l,...k()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[A,j,"auto","initial","none",B]}],grow:[{grow:["",A,X,B]}],shrink:[{shrink:["",A,X,B]}],order:[{order:[L,"first","last","none",X,B]}],"grid-cols":[{"grid-cols":P()}],"col-start-end":[{col:I()}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":P()}],"row-start-end":[{row:I()}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":F()}],"auto-rows":[{"auto-rows":F()}],gap:[{gap:k()}],"gap-x":[{"gap-x":k()}],"gap-y":[{"gap-y":k()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[..._(),"normal"]}],"justify-self":[{"justify-self":["auto",..._()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[..._(),{baseline:["","last"]}]}],"align-self":[{self:["auto",..._(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[..._(),"baseline"]}],"place-self":[{"place-self":["auto",..._()]}],p:[{p:k()}],px:[{px:k()}],py:[{py:k()}],ps:[{ps:k()}],pe:[{pe:k()}],pt:[{pt:k()}],pr:[{pr:k()}],pb:[{pb:k()}],pl:[{pl:k()}],m:[{m:ee()}],mx:[{mx:ee()}],my:[{my:ee()}],ms:[{ms:ee()}],me:[{me:ee()}],mt:[{mt:ee()}],mr:[{mr:ee()}],mb:[{mb:ee()}],ml:[{ml:ee()}],"space-x":[{"space-x":k()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":k()}],"space-y-reverse":["space-y-reverse"],size:[{size:et()}],w:[{w:[l,"screen",...et()]}],"min-w":[{"min-w":[l,"screen","none",...et()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[i]},...et()]}],h:[{h:["screen","lh",...et()]}],"min-h":[{"min-h":["screen","lh","none",...et()]}],"max-h":[{"max-h":["screen","lh",...et()]}],"font-size":[{text:["base",r,Y,H]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,X,V]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",D,B]}],"font-family":[{font:[J,B,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,X,B]}],"line-clamp":[{"line-clamp":[A,"none",X,V]}],leading:[{leading:[a,...k()]}],"list-image":[{"list-image":["none",X,B]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",X,B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:er()}],"text-color":[{text:er()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ec(),"wavy"]}],"text-decoration-thickness":[{decoration:[A,"from-font","auto",X,H]}],"text-decoration-color":[{decoration:er()}],"underline-offset":[{"underline-offset":[A,"auto",X,B]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",X,B]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",X,B]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:eo()}],"bg-repeat":[{bg:en()}],"bg-size":[{bg:ea()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},L,X,B],radial:["",X,B],conic:[L,X,B]},Z,$]}],"bg-color":[{bg:er()}],"gradient-from-pos":[{from:ei()}],"gradient-via-pos":[{via:ei()}],"gradient-to-pos":[{to:ei()}],"gradient-from":[{from:er()}],"gradient-via":[{via:er()}],"gradient-to":[{to:er()}],rounded:[{rounded:el()}],"rounded-s":[{"rounded-s":el()}],"rounded-e":[{"rounded-e":el()}],"rounded-t":[{"rounded-t":el()}],"rounded-r":[{"rounded-r":el()}],"rounded-b":[{"rounded-b":el()}],"rounded-l":[{"rounded-l":el()}],"rounded-ss":[{"rounded-ss":el()}],"rounded-se":[{"rounded-se":el()}],"rounded-ee":[{"rounded-ee":el()}],"rounded-es":[{"rounded-es":el()}],"rounded-tl":[{"rounded-tl":el()}],"rounded-tr":[{"rounded-tr":el()}],"rounded-br":[{"rounded-br":el()}],"rounded-bl":[{"rounded-bl":el()}],"border-w":[{border:es()}],"border-w-x":[{"border-x":es()}],"border-w-y":[{"border-y":es()}],"border-w-s":[{"border-s":es()}],"border-w-e":[{"border-e":es()}],"border-w-t":[{"border-t":es()}],"border-w-r":[{"border-r":es()}],"border-w-b":[{"border-b":es()}],"border-w-l":[{"border-l":es()}],"divide-x":[{"divide-x":es()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":es()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ec(),"hidden","none"]}],"divide-style":[{divide:[...ec(),"hidden","none"]}],"border-color":[{border:er()}],"border-color-x":[{"border-x":er()}],"border-color-y":[{"border-y":er()}],"border-color-s":[{"border-s":er()}],"border-color-e":[{"border-e":er()}],"border-color-t":[{"border-t":er()}],"border-color-r":[{"border-r":er()}],"border-color-b":[{"border-b":er()}],"border-color-l":[{"border-l":er()}],"divide-color":[{divide:er()}],"outline-style":[{outline:[...ec(),"none","hidden"]}],"outline-offset":[{"outline-offset":[A,X,B]}],"outline-w":[{outline:["",A,Y,H]}],"outline-color":[{outline:er()}],shadow:[{shadow:["","none",d,Q,G]}],"shadow-color":[{shadow:er()}],"inset-shadow":[{"inset-shadow":["none",u,Q,G]}],"inset-shadow-color":[{"inset-shadow":er()}],"ring-w":[{ring:es()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:er()}],"ring-offset-w":[{"ring-offset":[A,H]}],"ring-offset-color":[{"ring-offset":er()}],"inset-ring-w":[{"inset-ring":es()}],"inset-ring-color":[{"inset-ring":er()}],"text-shadow":[{"text-shadow":["none",m,Q,G]}],"text-shadow-color":[{"text-shadow":er()}],opacity:[{opacity:[A,X,B]}],"mix-blend":[{"mix-blend":[...ed(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ed()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[A]}],"mask-image-linear-from-pos":[{"mask-linear-from":eu()}],"mask-image-linear-to-pos":[{"mask-linear-to":eu()}],"mask-image-linear-from-color":[{"mask-linear-from":er()}],"mask-image-linear-to-color":[{"mask-linear-to":er()}],"mask-image-t-from-pos":[{"mask-t-from":eu()}],"mask-image-t-to-pos":[{"mask-t-to":eu()}],"mask-image-t-from-color":[{"mask-t-from":er()}],"mask-image-t-to-color":[{"mask-t-to":er()}],"mask-image-r-from-pos":[{"mask-r-from":eu()}],"mask-image-r-to-pos":[{"mask-r-to":eu()}],"mask-image-r-from-color":[{"mask-r-from":er()}],"mask-image-r-to-color":[{"mask-r-to":er()}],"mask-image-b-from-pos":[{"mask-b-from":eu()}],"mask-image-b-to-pos":[{"mask-b-to":eu()}],"mask-image-b-from-color":[{"mask-b-from":er()}],"mask-image-b-to-color":[{"mask-b-to":er()}],"mask-image-l-from-pos":[{"mask-l-from":eu()}],"mask-image-l-to-pos":[{"mask-l-to":eu()}],"mask-image-l-from-color":[{"mask-l-from":er()}],"mask-image-l-to-color":[{"mask-l-to":er()}],"mask-image-x-from-pos":[{"mask-x-from":eu()}],"mask-image-x-to-pos":[{"mask-x-to":eu()}],"mask-image-x-from-color":[{"mask-x-from":er()}],"mask-image-x-to-color":[{"mask-x-to":er()}],"mask-image-y-from-pos":[{"mask-y-from":eu()}],"mask-image-y-to-pos":[{"mask-y-to":eu()}],"mask-image-y-from-color":[{"mask-y-from":er()}],"mask-image-y-to-color":[{"mask-y-to":er()}],"mask-image-radial":[{"mask-radial":[X,B]}],"mask-image-radial-from-pos":[{"mask-radial-from":eu()}],"mask-image-radial-to-pos":[{"mask-radial-to":eu()}],"mask-image-radial-from-color":[{"mask-radial-from":er()}],"mask-image-radial-to-color":[{"mask-radial-to":er()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[A]}],"mask-image-conic-from-pos":[{"mask-conic-from":eu()}],"mask-image-conic-to-pos":[{"mask-conic-to":eu()}],"mask-image-conic-from-color":[{"mask-conic-from":er()}],"mask-image-conic-to-color":[{"mask-conic-to":er()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:eo()}],"mask-repeat":[{mask:en()}],"mask-size":[{mask:ea()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",X,B]}],filter:[{filter:["","none",X,B]}],blur:[{blur:em()}],brightness:[{brightness:[A,X,B]}],contrast:[{contrast:[A,X,B]}],"drop-shadow":[{"drop-shadow":["","none",f,Q,G]}],"drop-shadow-color":[{"drop-shadow":er()}],grayscale:[{grayscale:["",A,X,B]}],"hue-rotate":[{"hue-rotate":[A,X,B]}],invert:[{invert:["",A,X,B]}],saturate:[{saturate:[A,X,B]}],sepia:[{sepia:["",A,X,B]}],"backdrop-filter":[{"backdrop-filter":["","none",X,B]}],"backdrop-blur":[{"backdrop-blur":em()}],"backdrop-brightness":[{"backdrop-brightness":[A,X,B]}],"backdrop-contrast":[{"backdrop-contrast":[A,X,B]}],"backdrop-grayscale":[{"backdrop-grayscale":["",A,X,B]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[A,X,B]}],"backdrop-invert":[{"backdrop-invert":["",A,X,B]}],"backdrop-opacity":[{"backdrop-opacity":[A,X,B]}],"backdrop-saturate":[{"backdrop-saturate":[A,X,B]}],"backdrop-sepia":[{"backdrop-sepia":["",A,X,B]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":k()}],"border-spacing-x":[{"border-spacing-x":k()}],"border-spacing-y":[{"border-spacing-y":k()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",X,B]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[A,"initial",X,B]}],ease:[{ease:["linear","initial",y,X,B]}],delay:[{delay:[A,X,B]}],animate:[{animate:["none",v,X,B]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[h,X,B]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:ef()}],"rotate-x":[{"rotate-x":ef()}],"rotate-y":[{"rotate-y":ef()}],"rotate-z":[{"rotate-z":ef()}],scale:[{scale:ep()}],"scale-x":[{"scale-x":ep()}],"scale-y":[{"scale-y":ep()}],"scale-z":[{"scale-z":ep()}],"scale-3d":["scale-3d"],skew:[{skew:eh()}],"skew-x":[{"skew-x":eh()}],"skew-y":[{"skew-y":eh()}],transform:[{transform:[X,B,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:eg()}],"translate-x":[{"translate-x":eg()}],"translate-y":[{"translate-y":eg()}],"translate-z":[{"translate-z":eg()}],"translate-none":["translate-none"],accent:[{accent:er()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:er()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",X,B]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",X,B]}],fill:[{fill:["none",...er()]}],"stroke-w":[{stroke:[A,Y,H,V]}],stroke:[{stroke:["none",...er()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function ed(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return ec(function(){for(var e,t,r=0,o="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,o,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(o=e(t[r]))&&(n&&(n+=" "),n+=o)}else for(o in t)t[o]&&(n&&(n+=" "),n+=o);return n}(e))&&(o&&(o+=" "),o+=t);return o}(t))}function eu(){if("undefined"!=typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=[...e].map(e=>e.toString(16).padStart(2,"0"));return t.slice(0,4).join("")+"-"+t.slice(4,6).join("")+"-"+t.slice(6,8).join("")+"-"+t.slice(8,10).join("")+"-"+t.slice(10,16).join("")}},2311:(e,t,r)=>{"use strict";r.d(t,{I:()=>d});var o=r(8106),n=r(1375),a=r(9688),i=r(6749),l=r(693),s=r(2185),c=r(4309);let d=(0,o.v)((e,t)=>({activeProject:null,savedProjects:[],isLoading:!0,isInitialized:!1,createNewProject:async r=>{var o,i,l;let{isLoading:d,activeProject:u}=t();if(d)throw c.w.log("ProjectStore","CREATE_PROJECT_BLOCKED",{reason:"already_creating",name:r,currentActiveProject:null==u?void 0:u.id}),Error("Project creation already in progress");c.w.log("ProjectStore","CREATE_PROJECT_START",{name:r,currentActiveProject:null==u?void 0:u.id}),e({isLoading:!0});let m={id:(0,s.l)(),name:r,thumbnail:"",createdAt:new Date,updatedAt:new Date,backgroundColor:"#000000",backgroundType:"color",blurIntensity:8};try{c.w.log("ProjectStore","STORAGE_SAVE_ATTEMPT",{projectId:m.id}),await n.P.saveProject(m),c.w.log("ProjectStore","STORAGE_SAVE_SUCCESS",{projectId:m.id}),c.w.log("ProjectStore","LOAD_ALL_PROJECTS_START",{caller:"createNewProject"}),await t().loadAllProjects(),c.w.log("ProjectStore","LOAD_ALL_PROJECTS_SUCCESS",{}),c.w.log("ProjectStore","SET_ACTIVE_PROJECT",{oldProject:null==(o=t().activeProject)?void 0:o.id,newProject:m.id,source:"create_new_project"}),e({activeProject:m});let r=t();if(!r.activeProject||r.activeProject.id!==m.id)throw c.w.log("ProjectStore","STATE_VALIDATION_FAILED",{expectedProject:m.id,actualProject:null==(i=r.activeProject)?void 0:i.id}),Error("Project state validation failed");return c.w.log("ProjectStore","CREATE_PROJECT_SUCCESS",{projectId:m.id}),m.id}catch(r){throw c.w.log("ProjectStore","CREATE_PROJECT_FAILED",{projectId:m.id,error:r instanceof Error?r.message:"Unknown error"}),a.oR.error("Failed to save new project"),c.w.log("ProjectStore","SET_ACTIVE_PROJECT",{oldProject:null==(l=t().activeProject)?void 0:l.id,newProject:null,source:"create_project_cleanup"}),e({activeProject:null}),r}finally{e({isLoading:!1})}},loadProject:async r=>{var o,a;c.w.log("ProjectStore","LOAD_PROJECT_START",{projectId:r,currentActiveProject:null==(o=t().activeProject)?void 0:o.id}),t().isInitialized||e({isLoading:!0});let s=i.useMediaStore.getState(),d=l.A.getState();s.clearAllMedia(),d.clearTimeline();try{c.w.log("ProjectStore","STORAGE_LOAD_ATTEMPT",{projectId:r});let o=await n.P.loadProject(r);if(o)c.w.log("ProjectStore","STORAGE_LOAD_SUCCESS",{projectId:r}),c.w.log("ProjectStore","SET_ACTIVE_PROJECT",{oldProject:null==(a=t().activeProject)?void 0:a.id,newProject:o.id,source:"load_project"}),e({activeProject:o}),c.w.log("ProjectStore","LOADING_PROJECT_MEDIA_TIMELINE",{projectId:r}),await Promise.all([s.loadProjectMedia(r),d.loadProjectTimeline(r)]),c.w.log("ProjectStore","PROJECT_MEDIA_TIMELINE_LOADED",{projectId:r});else throw Error("Project with id ".concat(r," not found"));c.w.log("ProjectStore","LOAD_PROJECT_SUCCESS",{projectId:r})}catch(e){throw c.w.log("ProjectStore","LOAD_PROJECT_FAILED",{projectId:r,error:e instanceof Error?e.message:"Unknown error"}),e}finally{e({isLoading:!1})}},saveCurrentProject:async()=>{let{activeProject:e}=t();if(e)try{let r=l.A.getState();await Promise.all([n.P.saveProject(e),r.saveProjectTimeline(e.id)]),c.w.log("ProjectStore","LOAD_ALL_PROJECTS_START",{caller:"saveCurrentProject"}),await t().loadAllProjects()}catch(t){c.w.log("ProjectStore","SAVE_CURRENT_PROJECT_FAILED",{projectId:e.id,error:t instanceof Error?t.message:"Unknown error"})}},loadAllProjects:async()=>{c.w.log("ProjectStore","LOAD_ALL_PROJECTS_START",{caller:"loadAllProjects_direct"}),t().isInitialized||e({isLoading:!0});try{if(c.w.log("ProjectStore","CALLING_STORAGE_SERVICE",{}),void 0!==window.electronAPI){c.w.log("ProjectStore","ELECTRON_ENV_DETECTED",{});let t=await new Promise((e,t)=>{setTimeout(async()=>{try{let t=await n.P.loadAllProjects();e(t)}catch(e){t(e)}},0)});c.w.log("ProjectStore","PROJECTS_LOADED",{count:t.length}),e({savedProjects:t})}else{let t=await n.P.loadAllProjects();c.w.log("ProjectStore","PROJECTS_LOADED",{count:t.length}),e({savedProjects:t})}c.w.log("ProjectStore","PROJECTS_SET_IN_STORE",{})}catch(e){c.w.log("ProjectStore","LOAD_ALL_PROJECTS_FAILED",{error:e instanceof Error?e.message:"Unknown error"})}finally{e({isLoading:!1,isInitialized:!0}),c.w.log("ProjectStore","STORE_INITIALIZED",{})}},deleteProject:async r=>{c.w.log("ProjectStore","DELETE_PROJECT_START",{projectId:r});try{await Promise.all([n.P.deleteProjectMedia(r),n.P.deleteProjectTimeline(r),n.P.deleteProject(r)]),c.w.log("ProjectStore","PROJECT_DATA_DELETED",{projectId:r}),await t().loadAllProjects(),c.w.log("ProjectStore","PROJECT_LIST_REFRESHED",{});let{activeProject:o}=t();if((null==o?void 0:o.id)===r){c.w.log("ProjectStore","SET_ACTIVE_PROJECT",{oldProject:o.id,newProject:null,source:"delete_project"}),e({activeProject:null});let t=i.useMediaStore.getState(),r=l.A.getState();t.clearAllMedia(),r.clearTimeline()}a.oR.success("Project deleted successfully")}catch(e){c.w.log("ProjectStore","DELETE_PROJECT_FAILED",{projectId:r,error:e instanceof Error?e.message:"Unknown error"}),a.oR.error("Failed to delete project",{description:e instanceof Error?e.message:"Please try again"})}},closeProject:()=>{var r;c.w.log("ProjectStore","SET_ACTIVE_PROJECT",{oldProject:null==(r=t().activeProject)?void 0:r.id,newProject:null,source:"close_project"}),e({activeProject:null});let o=i.useMediaStore.getState(),n=l.A.getState();o.clearAllMedia(),n.clearTimeline()},renameProject:async(r,o)=>{let{savedProjects:i}=t(),l=i.find(e=>e.id===r);if(!l)return void a.oR.error("Project not found",{description:"Please try again"});let s={...l,name:o,updatedAt:new Date};try{await n.P.saveProject(s),await t().loadAllProjects();let{activeProject:o}=t();(null==o?void 0:o.id)===r&&e({activeProject:s})}catch(e){console.error("Failed to rename project:",e),a.oR.error("Failed to rename project",{description:e instanceof Error?e.message:"Please try again"})}},duplicateProject:async e=>{try{let r=await n.P.loadProject(e);if(!r)throw a.oR.error("Project not found",{description:"Please try again"}),Error("Project not found");let{savedProjects:o}=t(),i=r.name.match(/^\((\d+)\)\s+(.+)$/),l=i?i[2]:r.name,c=[];o.forEach(e=>{let t=e.name.match(/^\((\d+)\)\s+(.+)$/);t&&t[2]===l&&c.push(parseInt(t[1],10))});let d=c.length>0?Math.max(...c)+1:1,u={id:(0,s.l)(),name:"(".concat(d,") ").concat(l),thumbnail:r.thumbnail,createdAt:new Date,updatedAt:new Date};return await n.P.saveProject(u),await t().loadAllProjects(),u.id}catch(e){throw console.error("Failed to duplicate project:",e),a.oR.error("Failed to duplicate project",{description:e instanceof Error?e.message:"Please try again"}),e}},updateProjectBackground:async r=>{let{activeProject:o}=t();if(!o)return;let i={...o,backgroundColor:r,updatedAt:new Date};try{await n.P.saveProject(i),e({activeProject:i}),await t().loadAllProjects()}catch(e){console.error("Failed to update project background:",e),a.oR.error("Failed to update background",{description:"Please try again"})}},updateBackgroundType:async(r,o)=>{let{activeProject:i}=t();if(!i)return;let l={...i,backgroundType:r,...(null==o?void 0:o.backgroundColor)&&{backgroundColor:o.backgroundColor},...(null==o?void 0:o.blurIntensity)&&{blurIntensity:o.blurIntensity},updatedAt:new Date};try{await n.P.saveProject(l),e({activeProject:l}),await t().loadAllProjects()}catch(e){console.error("Failed to update background type:",e),a.oR.error("Failed to update background",{description:"Please try again"})}},updateProjectFps:async r=>{let{activeProject:o}=t();if(!o)return;let i={...o,fps:r,updatedAt:new Date};try{await n.P.saveProject(i),e({activeProject:i}),await t().loadAllProjects()}catch(e){console.error("Failed to update project FPS:",e),a.oR.error("Failed to update project FPS",{description:"Please try again"})}}}))},2730:(e,t,r)=>{"use strict";r.d(t,{m_:()=>tY,ZI:()=>tq,Bc:()=>tX,k$:()=>tJ});var o,n=r(6029),a=r(5729),i=r.t(a,2);function l(e,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),!1===r||!o.defaultPrevented)return t?.(o)}}function s(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function c(...e){return a.useCallback(function(...e){return t=>{let r=!1,o=e.map(e=>{let o=s(e,t);return r||"function"!=typeof o||(r=!0),o});if(r)return()=>{for(let t=0;t<o.length;t++){let r=o[t];"function"==typeof r?r():s(e[t],null)}}}}(...e),e)}function d(e,t=[]){let r=[],o=()=>{let t=r.map(e=>a.createContext(e));return function(r){let o=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:o}}),[r,o])}};return o.scopeName=e,[function(t,o){let i=a.createContext(o),l=r.length;r=[...r,o];let s=t=>{let{scope:r,children:o,...s}=t,c=r?.[e]?.[l]||i,d=a.useMemo(()=>s,Object.values(s));return(0,n.jsx)(c.Provider,{value:d,children:o})};return s.displayName=t+"Provider",[s,function(r,n){let s=n?.[e]?.[l]||i,c=a.useContext(s);if(c)return c;if(void 0!==o)return o;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let o=r.reduce((t,{useScope:r,scopeName:o})=>{let n=r(e)[`__scope${o}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}(o,...t)]}var u=r(6760),m=r(9358),f=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,m.TL)(`Primitive.${t}`),o=a.forwardRef((e,o)=>{let{asChild:a,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(a?r:t,{...i,ref:o})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function p(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}var h="dismissableLayer.update",g=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),y=a.forwardRef((e,t)=>{let{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:d,onInteractOutside:u,onDismiss:m,...y}=e,w=a.useContext(g),[E,x]=a.useState(null),T=E?.ownerDocument??globalThis?.document,[,S]=a.useState({}),k=c(t,e=>x(e)),R=Array.from(w.layers),[P]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),I=R.indexOf(P),j=E?R.indexOf(E):-1,A=w.layersWithOutsidePointerEventsDisabled.size>0,L=j>=I,D=function(e,t=globalThis?.document){let r=p(e),o=a.useRef(!1),n=a.useRef(()=>{});return a.useEffect(()=>{let e=e=>{if(e.target&&!o.current){let o=function(){b("dismissableLayer.pointerDownOutside",r,a,{discrete:!0})},a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=o,t.addEventListener("click",n.current,{once:!0})):o()}else t.removeEventListener("click",n.current);o.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,r]),{onPointerDownCapture:()=>o.current=!0}}(e=>{let t=e.target,r=[...w.branches].some(e=>e.contains(t));L&&!r&&(s?.(e),u?.(e),e.defaultPrevented||m?.())},T),C=function(e,t=globalThis?.document){let r=p(e),o=a.useRef(!1);return a.useEffect(()=>{let e=e=>{e.target&&!o.current&&b("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}(e=>{let t=e.target;![...w.branches].some(e=>e.contains(t))&&(d?.(e),u?.(e),e.defaultPrevented||m?.())},T);return!function(e,t=globalThis?.document){let r=p(e);a.useEffect(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[r,t])}(e=>{j===w.layers.size-1&&(i?.(e),!e.defaultPrevented&&m&&(e.preventDefault(),m()))},T),a.useEffect(()=>{if(E)return r&&(0===w.layersWithOutsidePointerEventsDisabled.size&&(o=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(E)),w.layers.add(E),v(),()=>{r&&1===w.layersWithOutsidePointerEventsDisabled.size&&(T.body.style.pointerEvents=o)}},[E,T,r,w]),a.useEffect(()=>()=>{E&&(w.layers.delete(E),w.layersWithOutsidePointerEventsDisabled.delete(E),v())},[E,w]),a.useEffect(()=>{let e=()=>S({});return document.addEventListener(h,e),()=>document.removeEventListener(h,e)},[]),(0,n.jsx)(f.div,{...y,ref:k,style:{pointerEvents:A?L?"auto":"none":void 0,...e.style},onFocusCapture:l(e.onFocusCapture,C.onFocusCapture),onBlurCapture:l(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:l(e.onPointerDownCapture,D.onPointerDownCapture)})});function v(){let e=new CustomEvent(h);document.dispatchEvent(e)}function b(e,t,r,{discrete:o}){let n=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});if(t&&n.addEventListener(e,t,{once:!0}),o)n&&u.flushSync(()=>n.dispatchEvent(a));else n.dispatchEvent(a)}y.displayName="DismissableLayer",a.forwardRef((e,t)=>{let r=a.useContext(g),o=a.useRef(null),i=c(t,o);return a.useEffect(()=>{let e=o.current;if(e)return r.branches.add(e),()=>{r.branches.delete(e)}},[r.branches]),(0,n.jsx)(f.div,{...e,ref:i})}).displayName="DismissableLayerBranch";var w=globalThis?.document?a.useLayoutEffect:()=>{},E=i[" useId ".trim().toString()]||(()=>void 0),x=0;let T=["top","right","bottom","left"],S=Math.min,k=Math.max,R=Math.round,P=Math.floor,I=e=>({x:e,y:e}),j={left:"right",right:"left",bottom:"top",top:"bottom"},A={start:"end",end:"start"};function L(e,t){return"function"==typeof e?e(t):e}function D(e){return e.split("-")[0]}function C(e){return e.split("-")[1]}function O(e){return"x"===e?"y":"x"}function N(e){return"y"===e?"height":"width"}let F=new Set(["top","bottom"]);function M(e){return F.has(D(e))?"y":"x"}function _(e){return e.replace(/start|end/g,e=>A[e])}let U=["left","right"],z=["right","left"],B=["top","bottom"],H=["bottom","top"];function V(e){return e.replace(/left|right|bottom|top/g,e=>j[e])}function W(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function $(e){let{x:t,y:r,width:o,height:n}=e;return{width:o,height:n,top:r,left:t,right:t+o,bottom:r+n,x:t,y:r}}function G(e,t,r){let o,{reference:n,floating:a}=e,i=M(t),l=O(M(t)),s=N(l),c=D(t),d="y"===i,u=n.x+n.width/2-a.width/2,m=n.y+n.height/2-a.height/2,f=n[s]/2-a[s]/2;switch(c){case"top":o={x:u,y:n.y-a.height};break;case"bottom":o={x:u,y:n.y+n.height};break;case"right":o={x:n.x+n.width,y:m};break;case"left":o={x:n.x-a.width,y:m};break;default:o={x:n.x,y:n.y}}switch(C(t)){case"start":o[l]-=f*(r&&d?-1:1);break;case"end":o[l]+=f*(r&&d?-1:1)}return o}let X=async(e,t,r)=>{let{placement:o="bottom",strategy:n="absolute",middleware:a=[],platform:i}=r,l=a.filter(Boolean),s=await (null==i.isRTL?void 0:i.isRTL(t)),c=await i.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:u}=G(c,o,s),m=o,f={},p=0;for(let r=0;r<l.length;r++){let{name:a,fn:h}=l[r],{x:g,y:y,data:v,reset:b}=await h({x:d,y:u,initialPlacement:o,placement:m,strategy:n,middlewareData:f,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=y?y:u,f={...f,[a]:{...f[a],...v}},b&&p<=50&&(p++,"object"==typeof b&&(b.placement&&(m=b.placement),b.rects&&(c=!0===b.rects?await i.getElementRects({reference:e,floating:t,strategy:n}):b.rects),{x:d,y:u}=G(c,m,s)),r=-1)}return{x:d,y:u,placement:m,strategy:n,middlewareData:f}};async function Y(e,t){var r;void 0===t&&(t={});let{x:o,y:n,platform:a,rects:i,elements:l,strategy:s}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:f=0}=L(t,e),p=W(f),h=l[m?"floating"===u?"reference":"floating":u],g=$(await a.getClippingRect({element:null==(r=await (null==a.isElement?void 0:a.isElement(h)))||r?h:h.contextElement||await (null==a.getDocumentElement?void 0:a.getDocumentElement(l.floating)),boundary:c,rootBoundary:d,strategy:s})),y="floating"===u?{x:o,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=await (null==a.getOffsetParent?void 0:a.getOffsetParent(l.floating)),b=await (null==a.isElement?void 0:a.isElement(v))&&await (null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},w=$(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:v,strategy:s}):y);return{top:(g.top-w.top+p.top)/b.y,bottom:(w.bottom-g.bottom+p.bottom)/b.y,left:(g.left-w.left+p.left)/b.x,right:(w.right-g.right+p.right)/b.x}}function J(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function q(e){return T.some(t=>e[t]>=0)}let K=new Set(["left","top"]);async function Z(e,t){let{placement:r,platform:o,elements:n}=e,a=await (null==o.isRTL?void 0:o.isRTL(n.floating)),i=D(r),l=C(r),s="y"===M(r),c=K.has(i)?-1:1,d=a&&s?-1:1,u=L(t,e),{mainAxis:m,crossAxis:f,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return l&&"number"==typeof p&&(f="end"===l?-1*p:p),s?{x:f*d,y:m*c}:{x:m*c,y:f*d}}function Q(){return"undefined"!=typeof window}function ee(e){return eo(e)?(e.nodeName||"").toLowerCase():"#document"}function et(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function er(e){var t;return null==(t=(eo(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function eo(e){return!!Q()&&(e instanceof Node||e instanceof et(e).Node)}function en(e){return!!Q()&&(e instanceof Element||e instanceof et(e).Element)}function ea(e){return!!Q()&&(e instanceof HTMLElement||e instanceof et(e).HTMLElement)}function ei(e){return!!Q()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof et(e).ShadowRoot)}let el=new Set(["inline","contents"]);function es(e){let{overflow:t,overflowX:r,overflowY:o,display:n}=eb(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+r)&&!el.has(n)}let ec=new Set(["table","td","th"]),ed=[":popover-open",":modal"];function eu(e){return ed.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let em=["transform","translate","scale","rotate","perspective"],ef=["transform","translate","scale","rotate","perspective","filter"],ep=["paint","layout","strict","content"];function eh(e){let t=eg(),r=en(e)?eb(e):e;return em.some(e=>!!r[e]&&"none"!==r[e])||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||ef.some(e=>(r.willChange||"").includes(e))||ep.some(e=>(r.contain||"").includes(e))}function eg(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let ey=new Set(["html","body","#document"]);function ev(e){return ey.has(ee(e))}function eb(e){return et(e).getComputedStyle(e)}function ew(e){return en(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function eE(e){if("html"===ee(e))return e;let t=e.assignedSlot||e.parentNode||ei(e)&&e.host||er(e);return ei(t)?t.host:t}function ex(e,t,r){var o;void 0===t&&(t=[]),void 0===r&&(r=!0);let n=function e(t){let r=eE(t);return ev(r)?t.ownerDocument?t.ownerDocument.body:t.body:ea(r)&&es(r)?r:e(r)}(e),a=n===(null==(o=e.ownerDocument)?void 0:o.body),i=et(n);if(a){let e=eT(i);return t.concat(i,i.visualViewport||[],es(n)?n:[],e&&r?ex(e):[])}return t.concat(n,ex(n,[],r))}function eT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eS(e){let t=eb(e),r=parseFloat(t.width)||0,o=parseFloat(t.height)||0,n=ea(e),a=n?e.offsetWidth:r,i=n?e.offsetHeight:o,l=R(r)!==a||R(o)!==i;return l&&(r=a,o=i),{width:r,height:o,$:l}}function ek(e){return en(e)?e:e.contextElement}function eR(e){let t=ek(e);if(!ea(t))return I(1);let r=t.getBoundingClientRect(),{width:o,height:n,$:a}=eS(t),i=(a?R(r.width):r.width)/o,l=(a?R(r.height):r.height)/n;return i&&Number.isFinite(i)||(i=1),l&&Number.isFinite(l)||(l=1),{x:i,y:l}}let eP=I(0);function eI(e){let t=et(e);return eg()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:eP}function ej(e,t,r,o){var n;void 0===t&&(t=!1),void 0===r&&(r=!1);let a=e.getBoundingClientRect(),i=ek(e),l=I(1);t&&(o?en(o)&&(l=eR(o)):l=eR(e));let s=(void 0===(n=r)&&(n=!1),o&&(!n||o===et(i))&&n)?eI(i):I(0),c=(a.left+s.x)/l.x,d=(a.top+s.y)/l.y,u=a.width/l.x,m=a.height/l.y;if(i){let e=et(i),t=o&&en(o)?et(o):o,r=e,n=eT(r);for(;n&&o&&t!==r;){let e=eR(n),t=n.getBoundingClientRect(),o=eb(n),a=t.left+(n.clientLeft+parseFloat(o.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(o.paddingTop))*e.y;c*=e.x,d*=e.y,u*=e.x,m*=e.y,c+=a,d+=i,n=eT(r=et(n))}}return $({width:u,height:m,x:c,y:d})}function eA(e,t){let r=ew(e).scrollLeft;return t?t.left+r:ej(er(e)).left+r}function eL(e,t,r){void 0===r&&(r=!1);let o=e.getBoundingClientRect();return{x:o.left+t.scrollLeft-(r?0:eA(e,o)),y:o.top+t.scrollTop}}let eD=new Set(["absolute","fixed"]);function eC(e,t,r){let o;if("viewport"===t)o=function(e,t){let r=et(e),o=er(e),n=r.visualViewport,a=o.clientWidth,i=o.clientHeight,l=0,s=0;if(n){a=n.width,i=n.height;let e=eg();(!e||e&&"fixed"===t)&&(l=n.offsetLeft,s=n.offsetTop)}return{width:a,height:i,x:l,y:s}}(e,r);else if("document"===t)o=function(e){let t=er(e),r=ew(e),o=e.ownerDocument.body,n=k(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=k(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),i=-r.scrollLeft+eA(e),l=-r.scrollTop;return"rtl"===eb(o).direction&&(i+=k(t.clientWidth,o.clientWidth)-n),{width:n,height:a,x:i,y:l}}(er(e));else if(en(t))o=function(e,t){let r=ej(e,!0,"fixed"===t),o=r.top+e.clientTop,n=r.left+e.clientLeft,a=ea(e)?eR(e):I(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y;return{width:i,height:l,x:n*a.x,y:o*a.y}}(t,r);else{let r=eI(e);o={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return $(o)}function eO(e){return"static"===eb(e).position}function eN(e,t){if(!ea(e)||"fixed"===eb(e).position)return null;if(t)return t(e);let r=e.offsetParent;return er(e)===r&&(r=r.ownerDocument.body),r}function eF(e,t){var r;let o=et(e);if(eu(e))return o;if(!ea(e)){let t=eE(e);for(;t&&!ev(t);){if(en(t)&&!eO(t))return t;t=eE(t)}return o}let n=eN(e,t);for(;n&&(r=n,ec.has(ee(r)))&&eO(n);)n=eN(n,t);return n&&ev(n)&&eO(n)&&!eh(n)?o:n||function(e){let t=eE(e);for(;ea(t)&&!ev(t);){if(eh(t))return t;if(eu(t))break;t=eE(t)}return null}(e)||o}let eM=async function(e){let t=this.getOffsetParent||eF,r=this.getDimensions,o=await r(e.floating);return{reference:function(e,t,r){let o=ea(t),n=er(t),a="fixed"===r,i=ej(e,!0,a,t),l={scrollLeft:0,scrollTop:0},s=I(0);if(o||!o&&!a)if(("body"!==ee(t)||es(n))&&(l=ew(t)),o){let e=ej(t,!0,a,t);s.x=e.x+t.clientLeft,s.y=e.y+t.clientTop}else n&&(s.x=eA(n));a&&!o&&n&&(s.x=eA(n));let c=!n||o||a?I(0):eL(n,l);return{x:i.left+l.scrollLeft-s.x-c.x,y:i.top+l.scrollTop-s.y-c.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},e_={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:o,strategy:n}=e,a="fixed"===n,i=er(o),l=!!t&&eu(t.floating);if(o===i||l&&a)return r;let s={scrollLeft:0,scrollTop:0},c=I(1),d=I(0),u=ea(o);if((u||!u&&!a)&&(("body"!==ee(o)||es(i))&&(s=ew(o)),ea(o))){let e=ej(o);c=eR(o),d.x=e.x+o.clientLeft,d.y=e.y+o.clientTop}let m=!i||u||a?I(0):eL(i,s,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-s.scrollLeft*c.x+d.x+m.x,y:r.y*c.y-s.scrollTop*c.y+d.y+m.y}},getDocumentElement:er,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:o,strategy:n}=e,a=[..."clippingAncestors"===r?eu(t)?[]:function(e,t){let r=t.get(e);if(r)return r;let o=ex(e,[],!1).filter(e=>en(e)&&"body"!==ee(e)),n=null,a="fixed"===eb(e).position,i=a?eE(e):e;for(;en(i)&&!ev(i);){let t=eb(i),r=eh(i);r||"fixed"!==t.position||(n=null),(a?!r&&!n:!r&&"static"===t.position&&!!n&&eD.has(n.position)||es(i)&&!r&&function e(t,r){let o=eE(t);return!(o===r||!en(o)||ev(o))&&("fixed"===eb(o).position||e(o,r))}(e,i))?o=o.filter(e=>e!==i):n=t,i=eE(i)}return t.set(e,o),o}(t,this._c):[].concat(r),o],i=a[0],l=a.reduce((e,r)=>{let o=eC(t,r,n);return e.top=k(o.top,e.top),e.right=S(o.right,e.right),e.bottom=S(o.bottom,e.bottom),e.left=k(o.left,e.left),e},eC(t,i,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:eF,getElementRects:eM,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:r}=eS(e);return{width:t,height:r}},getScale:eR,isElement:en,isRTL:function(e){return"rtl"===eb(e).direction}};function eU(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let ez=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:o,placement:n,rects:a,platform:i,elements:l,middlewareData:s}=t,{element:c,padding:d=0}=L(e,t)||{};if(null==c)return{};let u=W(d),m={x:r,y:o},f=O(M(n)),p=N(f),h=await i.getDimensions(c),g="y"===f,y=g?"clientHeight":"clientWidth",v=a.reference[p]+a.reference[f]-m[f]-a.floating[p],b=m[f]-a.reference[f],w=await (null==i.getOffsetParent?void 0:i.getOffsetParent(c)),E=w?w[y]:0;E&&await (null==i.isElement?void 0:i.isElement(w))||(E=l.floating[y]||a.floating[p]);let x=E/2-h[p]/2-1,T=S(u[g?"top":"left"],x),R=S(u[g?"bottom":"right"],x),P=E-h[p]-R,I=E/2-h[p]/2+(v/2-b/2),j=k(T,S(I,P)),A=!s.arrow&&null!=C(n)&&I!==j&&a.reference[p]/2-(I<T?T:R)-h[p]/2<0,D=A?I<T?I-T:I-P:0;return{[f]:m[f]+D,data:{[f]:j,centerOffset:I-j-D,...A&&{alignmentOffset:D}},reset:A}}}),eB=(e,t,r)=>{let o=new Map,n={platform:e_,...r},a={...n.platform,_c:o};return X(e,t,{...n,platform:a})};var eH="undefined"!=typeof document?a.useLayoutEffect:function(){};function eV(e,t){let r,o,n;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!==t.length)return!1;for(o=r;0!=o--;)if(!eV(e[o],t[o]))return!1;return!0}if((r=(n=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(o=r;0!=o--;)if(!({}).hasOwnProperty.call(t,n[o]))return!1;for(o=r;0!=o--;){let r=n[o];if(("_owner"!==r||!e.$$typeof)&&!eV(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}function eW(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function e$(e,t){let r=eW(e);return Math.round(t*r)/r}function eG(e){let t=a.useRef(e);return eH(()=>{t.current=e}),t}let eX=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:o}="function"==typeof e?e(t):e;return r&&({}).hasOwnProperty.call(r,"current")?null!=r.current?ez({element:r.current,padding:o}).fn(t):{}:r?ez({element:r,padding:o}).fn(t):{}}}),eY=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,o;let{x:n,y:a,placement:i,middlewareData:l}=t,s=await Z(t,e);return i===(null==(r=l.offset)?void 0:r.placement)&&null!=(o=l.arrow)&&o.alignmentOffset?{}:{x:n+s.x,y:a+s.y,data:{...s,placement:i}}}}}(e),options:[e,t]}),eJ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:r,y:o,placement:n}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...s}=L(e,t),c={x:r,y:o},d=await Y(t,s),u=M(D(n)),m=O(u),f=c[m],p=c[u];if(a){let e="y"===m?"top":"left",t="y"===m?"bottom":"right",r=f+d[e],o=f-d[t];f=k(r,S(f,o))}if(i){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",r=p+d[e],o=p-d[t];p=k(r,S(p,o))}let h=l.fn({...t,[m]:f,[u]:p});return{...h,data:{x:h.x-r,y:h.y-o,enabled:{[m]:a,[u]:i}}}}}}(e),options:[e,t]}),eq=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:r,y:o,placement:n,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:s=!0,crossAxis:c=!0}=L(e,t),d={x:r,y:o},u=M(n),m=O(u),f=d[m],p=d[u],h=L(l,t),g="number"==typeof h?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(s){let e="y"===m?"height":"width",t=a.reference[m]-a.floating[e]+g.mainAxis,r=a.reference[m]+a.reference[e]-g.mainAxis;f<t?f=t:f>r&&(f=r)}if(c){var y,v;let e="y"===m?"width":"height",t=K.has(D(n)),r=a.reference[u]-a.floating[e]+(t&&(null==(y=i.offset)?void 0:y[u])||0)+(t?0:g.crossAxis),o=a.reference[u]+a.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<r?p=r:p>o&&(p=o)}return{[m]:f,[u]:p}}}}(e),options:[e,t]}),eK=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,o,n,a,i;let{placement:l,middlewareData:s,rects:c,initialPlacement:d,platform:u,elements:m}=t,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...b}=L(e,t);if(null!=(r=s.arrow)&&r.alignmentOffset)return{};let w=D(l),E=M(d),x=D(d)===d,T=await (null==u.isRTL?void 0:u.isRTL(m.floating)),S=h||(x||!v?[V(d)]:function(e){let t=V(e);return[_(e),t,_(t)]}(d)),k="none"!==y;!h&&k&&S.push(...function(e,t,r,o){let n=C(e),a=function(e,t,r){switch(e){case"top":case"bottom":if(r)return t?z:U;return t?U:z;case"left":case"right":return t?B:H;default:return[]}}(D(e),"start"===r,o);return n&&(a=a.map(e=>e+"-"+n),t&&(a=a.concat(a.map(_)))),a}(d,v,y,T));let R=[d,...S],P=await Y(t,b),I=[],j=(null==(o=s.flip)?void 0:o.overflows)||[];if(f&&I.push(P[w]),p){let e=function(e,t,r){void 0===r&&(r=!1);let o=C(e),n=O(M(e)),a=N(n),i="x"===n?o===(r?"end":"start")?"right":"left":"start"===o?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=V(i)),[i,V(i)]}(l,c,T);I.push(P[e[0]],P[e[1]])}if(j=[...j,{placement:l,overflows:I}],!I.every(e=>e<=0)){let e=((null==(n=s.flip)?void 0:n.index)||0)+1,t=R[e];if(t&&("alignment"!==p||E===M(t)||j.every(e=>M(e.placement)!==E||e.overflows[0]>0)))return{data:{index:e,overflows:j},reset:{placement:t}};let r=null==(a=j.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!r)switch(g){case"bestFit":{let e=null==(i=j.filter(e=>{if(k){let t=M(e.placement);return t===E||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];e&&(r=e);break}case"initialPlacement":r=d}if(l!==r)return{reset:{placement:r}}}return{}}}}(e),options:[e,t]}),eZ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,o;let n,a,{placement:i,rects:l,platform:s,elements:c}=t,{apply:d=()=>{},...u}=L(e,t),m=await Y(t,u),f=D(i),p=C(i),h="y"===M(i),{width:g,height:y}=l.floating;"top"===f||"bottom"===f?(n=f,a=p===(await (null==s.isRTL?void 0:s.isRTL(c.floating))?"start":"end")?"left":"right"):(a=f,n="end"===p?"top":"bottom");let v=y-m.top-m.bottom,b=g-m.left-m.right,w=S(y-m[n],v),E=S(g-m[a],b),x=!t.middlewareData.shift,T=w,R=E;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(R=b),null!=(o=t.middlewareData.shift)&&o.enabled.y&&(T=v),x&&!p){let e=k(m.left,0),t=k(m.right,0),r=k(m.top,0),o=k(m.bottom,0);h?R=g-2*(0!==e||0!==t?e+t:k(m.left,m.right)):T=y-2*(0!==r||0!==o?r+o:k(m.top,m.bottom))}await d({...t,availableWidth:R,availableHeight:T});let P=await s.getDimensions(c.floating);return g!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),eQ=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:r}=t,{strategy:o="referenceHidden",...n}=L(e,t);switch(o){case"referenceHidden":{let e=J(await Y(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:q(e)}}}case"escaped":{let e=J(await Y(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:q(e)}}}default:return{}}}}}(e),options:[e,t]}),e0=(e,t)=>({...eX(e),options:[e,t]});var e1=a.forwardRef((e,t)=>{let{children:r,width:o=10,height:a=5,...i}=e;return(0,n.jsx)(f.svg,{...i,ref:t,width:o,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:(0,n.jsx)("polygon",{points:"0,0 30,0 15,10"})})});e1.displayName="Arrow";var e2=globalThis?.document?a.useLayoutEffect:()=>{},e5="Popper",[e3,e8]=d(e5),[e4,e6]=e3(e5),e9=e=>{let{__scopePopper:t,children:r}=e,[o,i]=a.useState(null);return(0,n.jsx)(e4,{scope:t,anchor:o,onAnchorChange:i,children:r})};e9.displayName=e5;var e7="PopperAnchor",te=a.forwardRef((e,t)=>{let{__scopePopper:r,virtualRef:o,...i}=e,l=e6(e7,r),s=a.useRef(null),d=c(t,s);return a.useEffect(()=>{l.onAnchorChange(o?.current||s.current)}),o?null:(0,n.jsx)(f.div,{...i,ref:d})});te.displayName=e7;var tt="PopperContent",[tr,to]=e3(tt),tn=a.forwardRef((e,t)=>{let{__scopePopper:r,side:o="bottom",sideOffset:i=0,align:l="center",alignOffset:s=0,arrowPadding:d=0,avoidCollisions:m=!0,collisionBoundary:p=[],collisionPadding:h=0,sticky:g="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:b,...w}=e,E=e6(tt,r),[x,T]=a.useState(null),R=c(t,e=>T(e)),[I,j]=a.useState(null),A=function(e){let[t,r]=a.useState(void 0);return e2(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let o,n;if(!Array.isArray(t)||!t.length)return;let a=t[0];if("borderBoxSize"in a){let e=a.borderBoxSize,t=Array.isArray(e)?e[0]:e;o=t.inlineSize,n=t.blockSize}else o=e.offsetWidth,n=e.offsetHeight;r({width:o,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(I),L=A?.width??0,D=A?.height??0,C="number"==typeof h?h:{top:0,right:0,bottom:0,left:0,...h},O=Array.isArray(p)?p:[p],N=O.length>0,F={padding:C,boundary:O.filter(ts),altBoundary:N},{refs:M,floatingStyles:_,placement:U,isPositioned:z,middlewareData:B}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:o=[],platform:n,elements:{reference:i,floating:l}={},transform:s=!0,whileElementsMounted:c,open:d}=e,[m,f]=a.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=a.useState(o);eV(p,o)||h(o);let[g,y]=a.useState(null),[v,b]=a.useState(null),w=a.useCallback(e=>{e!==S.current&&(S.current=e,y(e))},[]),E=a.useCallback(e=>{e!==k.current&&(k.current=e,b(e))},[]),x=i||g,T=l||v,S=a.useRef(null),k=a.useRef(null),R=a.useRef(m),P=null!=c,I=eG(c),j=eG(n),A=eG(d),L=a.useCallback(()=>{if(!S.current||!k.current)return;let e={placement:t,strategy:r,middleware:p};j.current&&(e.platform=j.current),eB(S.current,k.current,e).then(e=>{let t={...e,isPositioned:!1!==A.current};D.current&&!eV(R.current,t)&&(R.current=t,u.flushSync(()=>{f(t)}))})},[p,t,r,j,A]);eH(()=>{!1===d&&R.current.isPositioned&&(R.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[d]);let D=a.useRef(!1);eH(()=>(D.current=!0,()=>{D.current=!1}),[]),eH(()=>{if(x&&(S.current=x),T&&(k.current=T),x&&T){if(I.current)return I.current(x,T,L);L()}},[x,T,L,I,P]);let C=a.useMemo(()=>({reference:S,floating:k,setReference:w,setFloating:E}),[w,E]),O=a.useMemo(()=>({reference:x,floating:T}),[x,T]),N=a.useMemo(()=>{let e={position:r,left:0,top:0};if(!O.floating)return e;let t=e$(O.floating,m.x),o=e$(O.floating,m.y);return s?{...e,transform:"translate("+t+"px, "+o+"px)",...eW(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:o}},[r,s,O.floating,m.x,m.y]);return a.useMemo(()=>({...m,update:L,refs:C,elements:O,floatingStyles:N}),[m,L,C,O,N])}({strategy:"fixed",placement:o+("center"!==l?"-"+l:""),whileElementsMounted:(...e)=>(function(e,t,r,o){let n;void 0===o&&(o={});let{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:l="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:c=!1}=o,d=ek(e),u=a||i?[...d?ex(d):[],...ex(t)]:[];u.forEach(e=>{a&&e.addEventListener("scroll",r,{passive:!0}),i&&e.addEventListener("resize",r)});let m=d&&s?function(e,t){let r,o=null,n=er(e);function a(){var e;clearTimeout(r),null==(e=o)||e.disconnect(),o=null}return!function i(l,s){void 0===l&&(l=!1),void 0===s&&(s=1),a();let c=e.getBoundingClientRect(),{left:d,top:u,width:m,height:f}=c;if(l||t(),!m||!f)return;let p=P(u),h=P(n.clientWidth-(d+m)),g={rootMargin:-p+"px "+-h+"px "+-P(n.clientHeight-(u+f))+"px "+-P(d)+"px",threshold:k(0,S(1,s))||1},y=!0;function v(t){let o=t[0].intersectionRatio;if(o!==s){if(!y)return i();o?i(!1,o):r=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==o||eU(c,e.getBoundingClientRect())||i(),y=!1}try{o=new IntersectionObserver(v,{...g,root:n.ownerDocument})}catch(e){o=new IntersectionObserver(v,g)}o.observe(e)}(!0),a}(d,r):null,f=-1,p=null;l&&(p=new ResizeObserver(e=>{let[o]=e;o&&o.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let h=c?ej(e):null;return c&&function t(){let o=ej(e);h&&!eU(h,o)&&r(),h=o,n=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach(e=>{a&&e.removeEventListener("scroll",r),i&&e.removeEventListener("resize",r)}),null==m||m(),null==(e=p)||e.disconnect(),p=null,c&&cancelAnimationFrame(n)}})(...e,{animationFrame:"always"===v}),elements:{reference:E.anchor},middleware:[eY({mainAxis:i+D,alignmentAxis:s}),m&&eJ({mainAxis:!0,crossAxis:!1,limiter:"partial"===g?eq():void 0,...F}),m&&eK({...F}),eZ({...F,apply:({elements:e,rects:t,availableWidth:r,availableHeight:o})=>{let{width:n,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${r}px`),i.setProperty("--radix-popper-available-height",`${o}px`),i.setProperty("--radix-popper-anchor-width",`${n}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}}),I&&e0({element:I,padding:d}),tc({arrowWidth:L,arrowHeight:D}),y&&eQ({strategy:"referenceHidden",...F})]}),[H,V]=td(U),W=function(e){let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),a.useMemo(()=>(...e)=>t.current?.(...e),[])}(b);e2(()=>{z&&W?.()},[z,W]);let $=B.arrow?.x,G=B.arrow?.y,X=B.arrow?.centerOffset!==0,[Y,J]=a.useState();return e2(()=>{x&&J(window.getComputedStyle(x).zIndex)},[x]),(0,n.jsx)("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:z?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[B.transformOrigin?.x,B.transformOrigin?.y].join(" "),...B.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,n.jsx)(tr,{scope:r,placedSide:H,onArrowChange:j,arrowX:$,arrowY:G,shouldHideArrow:X,children:(0,n.jsx)(f.div,{"data-side":H,"data-align":V,...w,ref:R,style:{...w.style,animation:z?void 0:"none"}})})})});tn.displayName=tt;var ta="PopperArrow",ti={top:"bottom",right:"left",bottom:"top",left:"right"},tl=a.forwardRef(function(e,t){let{__scopePopper:r,...o}=e,a=to(ta,r),i=ti[a.placedSide];return(0,n.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,n.jsx)(e1,{...o,ref:t,style:{...o.style,display:"block"}})})});function ts(e){return null!==e}tl.displayName=ta;var tc=e=>({name:"transformOrigin",options:e,fn(t){let{placement:r,rects:o,middlewareData:n}=t,a=n.arrow?.centerOffset!==0,i=a?0:e.arrowWidth,l=a?0:e.arrowHeight,[s,c]=td(r),d={start:"0%",center:"50%",end:"100%"}[c],u=(n.arrow?.x??0)+i/2,m=(n.arrow?.y??0)+l/2,f="",p="";return"bottom"===s?(f=a?d:`${u}px`,p=`${-l}px`):"top"===s?(f=a?d:`${u}px`,p=`${o.floating.height+l}px`):"right"===s?(f=`${-l}px`,p=a?d:`${m}px`):"left"===s&&(f=`${o.floating.width+l}px`,p=a?d:`${m}px`),{data:{x:f,y:p}}}});function td(e){let[t,r="center"]=e.split("-");return[t,r]}var tu=globalThis?.document?a.useLayoutEffect:()=>{},tm=a.forwardRef((e,t)=>{let{container:r,...o}=e,[i,l]=a.useState(!1);tu(()=>l(!0),[]);let s=r||i&&globalThis?.document?.body;return s?u.createPortal((0,n.jsx)(f.div,{...o,ref:t}),s):null});tm.displayName="Portal";var tf=globalThis?.document?a.useLayoutEffect:()=>{},tp=e=>{let{present:t,children:r}=e,o=function(e){var t,r;let[o,n]=a.useState(),i=a.useRef(null),l=a.useRef(e),s=a.useRef("none"),[c,d]=(t=e?"mounted":"unmounted",r={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},a.useReducer((e,t)=>r[e][t]??e,t));return a.useEffect(()=>{let e=th(i.current);s.current="mounted"===c?e:"none"},[c]),tf(()=>{let t=i.current,r=l.current;if(r!==e){let o=s.current,n=th(t);e?d("MOUNT"):"none"===n||t?.display==="none"?d("UNMOUNT"):r&&o!==n?d("ANIMATION_OUT"):d("UNMOUNT"),l.current=e}},[e,d]),tf(()=>{if(o){let e,t=o.ownerDocument.defaultView??window,r=r=>{let n=th(i.current).includes(r.animationName);if(r.target===o&&n&&(d("ANIMATION_END"),!l.current)){let r=o.style.animationFillMode;o.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===o.style.animationFillMode&&(o.style.animationFillMode=r)})}},n=e=>{e.target===o&&(s.current=th(i.current))};return o.addEventListener("animationstart",n),o.addEventListener("animationcancel",r),o.addEventListener("animationend",r),()=>{t.clearTimeout(e),o.removeEventListener("animationstart",n),o.removeEventListener("animationcancel",r),o.removeEventListener("animationend",r)}}d("ANIMATION_END")},[o,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:a.useCallback(e=>{i.current=e?getComputedStyle(e):null,n(e)},[])}}(t),n="function"==typeof r?r({present:o.isPresent}):a.Children.only(r),i=c(o.ref,function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(n));return"function"==typeof r||o.isPresent?a.cloneElement(n,{ref:i}):null};function th(e){return e?.animationName||"none"}tp.displayName="Presence";var tg=globalThis?.document?a.useLayoutEffect:()=>{},ty=i[" useInsertionEffect ".trim().toString()]||tg,tv=(Symbol("RADIX:SYNC_STATE"),Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})),tb=a.forwardRef((e,t)=>(0,n.jsx)(f.span,{...e,ref:t,style:{...tv,...e.style}}));tb.displayName="VisuallyHidden";var[tw,tE]=d("Tooltip",[e8]),tx=e8(),tT="TooltipProvider",tS="tooltip.open",[tk,tR]=tw(tT),tP=e=>{let{__scopeTooltip:t,delayDuration:r=700,skipDelayDuration:o=300,disableHoverableContent:i=!1,children:l}=e,s=a.useRef(!0),c=a.useRef(!1),d=a.useRef(0);return a.useEffect(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,n.jsx)(tk,{scope:t,isOpenDelayedRef:s,delayDuration:r,onOpen:a.useCallback(()=>{window.clearTimeout(d.current),s.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>s.current=!0,o)},[o]),isPointerInTransitRef:c,onPointerInTransitChange:a.useCallback(e=>{c.current=e},[]),disableHoverableContent:i,children:l})};tP.displayName=tT;var tI="Tooltip",[tj,tA]=tw(tI),tL=e=>{let{__scopeTooltip:t,children:r,open:o,defaultOpen:i,onOpenChange:l,disableHoverableContent:s,delayDuration:c}=e,d=tR(tI,e.__scopeTooltip),u=tx(t),[m,f]=a.useState(null),p=function(e){let[t,r]=a.useState(E());return w(()=>{r(e=>e??String(x++))},[void 0]),e||(t?`radix-${t}`:"")}(),h=a.useRef(0),g=s??d.disableHoverableContent,y=c??d.delayDuration,v=a.useRef(!1),[b,T]=function({prop:e,defaultProp:t,onChange:r=()=>{},caller:o}){let[n,i,l]=function({defaultProp:e,onChange:t}){let[r,o]=a.useState(e),n=a.useRef(r),i=a.useRef(t);return ty(()=>{i.current=t},[t]),a.useEffect(()=>{n.current!==r&&(i.current?.(r),n.current=r)},[r,n]),[r,o,i]}({defaultProp:t,onChange:r}),s=void 0!==e,c=s?e:n;{let t=a.useRef(void 0!==e);a.useEffect(()=>{let e=t.current;if(e!==s){let t=s?"controlled":"uncontrolled";console.warn(`${o} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=s},[s,o])}return[c,a.useCallback(t=>{if(s){let r="function"==typeof t?t(e):t;r!==e&&l.current?.(r)}else i(t)},[s,e,i,l])]}({prop:o,defaultProp:i??!1,onChange:e=>{e?(d.onOpen(),document.dispatchEvent(new CustomEvent(tS))):d.onClose(),l?.(e)},caller:tI}),S=a.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),k=a.useCallback(()=>{window.clearTimeout(h.current),h.current=0,v.current=!1,T(!0)},[T]),R=a.useCallback(()=>{window.clearTimeout(h.current),h.current=0,T(!1)},[T]),P=a.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{v.current=!0,T(!0),h.current=0},y)},[y,T]);return a.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),(0,n.jsx)(e9,{...u,children:(0,n.jsx)(tj,{scope:t,contentId:p,open:b,stateAttribute:S,trigger:m,onTriggerChange:f,onTriggerEnter:a.useCallback(()=>{d.isOpenDelayedRef.current?P():k()},[d.isOpenDelayedRef,P,k]),onTriggerLeave:a.useCallback(()=>{g?R():(window.clearTimeout(h.current),h.current=0)},[R,g]),onOpen:k,onClose:R,disableHoverableContent:g,children:r})})};tL.displayName=tI;var tD="TooltipTrigger",tC=a.forwardRef((e,t)=>{let{__scopeTooltip:r,...o}=e,i=tA(tD,r),s=tR(tD,r),d=tx(r),u=c(t,a.useRef(null),i.onTriggerChange),m=a.useRef(!1),p=a.useRef(!1),h=a.useCallback(()=>m.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),(0,n.jsx)(te,{asChild:!0,...d,children:(0,n.jsx)(f.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...o,ref:u,onPointerMove:l(e.onPointerMove,e=>{"touch"!==e.pointerType&&(p.current||s.isPointerInTransitRef.current||(i.onTriggerEnter(),p.current=!0))}),onPointerLeave:l(e.onPointerLeave,()=>{i.onTriggerLeave(),p.current=!1}),onPointerDown:l(e.onPointerDown,()=>{i.open&&i.onClose(),m.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:l(e.onFocus,()=>{m.current||i.onOpen()}),onBlur:l(e.onBlur,i.onClose),onClick:l(e.onClick,i.onClose)})})});tC.displayName=tD;var tO="TooltipPortal",[tN,tF]=tw(tO,{forceMount:void 0}),tM=e=>{let{__scopeTooltip:t,forceMount:r,children:o,container:a}=e,i=tA(tO,t);return(0,n.jsx)(tN,{scope:t,forceMount:r,children:(0,n.jsx)(tp,{present:r||i.open,children:(0,n.jsx)(tm,{asChild:!0,container:a,children:o})})})};tM.displayName=tO;var t_="TooltipContent",tU=a.forwardRef((e,t)=>{let r=tF(t_,e.__scopeTooltip),{forceMount:o=r.forceMount,side:a="top",...i}=e,l=tA(t_,e.__scopeTooltip);return(0,n.jsx)(tp,{present:o||l.open,children:l.disableHoverableContent?(0,n.jsx)(tW,{side:a,...i,ref:t}):(0,n.jsx)(tz,{side:a,...i,ref:t})})}),tz=a.forwardRef((e,t)=>{let r=tA(t_,e.__scopeTooltip),o=tR(t_,e.__scopeTooltip),i=a.useRef(null),l=c(t,i),[s,d]=a.useState(null),{trigger:u,onClose:m}=r,f=i.current,{onPointerInTransitChange:p}=o,h=a.useCallback(()=>{d(null),p(!1)},[p]),g=a.useCallback((e,t)=>{let r=e.currentTarget,o={x:e.clientX,y:e.clientY},n=function(e,t){let r=Math.abs(t.top-e.y),o=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,o,n,a)){case a:return"left";case n:return"right";case r:return"top";case o:return"bottom";default:throw Error("unreachable")}}(o,r.getBoundingClientRect());d(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:1*!!(e.y>t.y)),function(e){if(e.length<=1)return e.slice();let t=[];for(let r=0;r<e.length;r++){let o=e[r];for(;t.length>=2;){let e=t[t.length-1],r=t[t.length-2];if((e.x-r.x)*(o.y-r.y)>=(e.y-r.y)*(o.x-r.x))t.pop();else break}t.push(o)}t.pop();let r=[];for(let t=e.length-1;t>=0;t--){let o=e[t];for(;r.length>=2;){let e=r[r.length-1],t=r[r.length-2];if((e.x-t.x)*(o.y-t.y)>=(e.y-t.y)*(o.x-t.x))r.pop();else break}r.push(o)}return(r.pop(),1===t.length&&1===r.length&&t[0].x===r[0].x&&t[0].y===r[0].y)?t:t.concat(r)}(t)}([...function(e,t,r=5){let o=[];switch(t){case"top":o.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":o.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":o.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":o.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r})}return o}(o,n),...function(e){let{top:t,right:r,bottom:o,left:n}=e;return[{x:n,y:t},{x:r,y:t},{x:r,y:o},{x:n,y:o}]}(t.getBoundingClientRect())])),p(!0)},[p]);return a.useEffect(()=>()=>h(),[h]),a.useEffect(()=>{if(u&&f){let e=e=>g(e,f),t=e=>g(e,u);return u.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{u.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[u,f,g,h]),a.useEffect(()=>{if(s){let e=e=>{let t=e.target,r={x:e.clientX,y:e.clientY},o=u?.contains(t)||f?.contains(t),n=!function(e,t){let{x:r,y:o}=e,n=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let i=t[e],l=t[a],s=i.x,c=i.y,d=l.x,u=l.y;c>o!=u>o&&r<(d-s)*(o-c)/(u-c)+s&&(n=!n)}return n}(r,s);o?h():n&&(h(),m())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[u,f,s,m,h]),(0,n.jsx)(tW,{...e,ref:l})}),[tB,tH]=tw(tI,{isInside:!1}),tV=(0,m.Dc)("TooltipContent"),tW=a.forwardRef((e,t)=>{let{__scopeTooltip:r,children:o,"aria-label":i,onEscapeKeyDown:l,onPointerDownOutside:s,...c}=e,d=tA(t_,r),u=tx(r),{onClose:m}=d;return a.useEffect(()=>(document.addEventListener(tS,m),()=>document.removeEventListener(tS,m)),[m]),a.useEffect(()=>{if(d.trigger){let e=e=>{let t=e.target;t?.contains(d.trigger)&&m()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[d.trigger,m]),(0,n.jsx)(y,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:m,children:(0,n.jsxs)(tn,{"data-state":d.stateAttribute,...u,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,n.jsx)(tV,{children:o}),(0,n.jsx)(tB,{scope:r,isInside:!0,children:(0,n.jsx)(tb,{id:d.contentId,role:"tooltip",children:i||o})})]})})});tU.displayName=t_;var t$="TooltipArrow";a.forwardRef((e,t)=>{let{__scopeTooltip:r,...o}=e,a=tx(r);return tH(t$,r).isInside?null:(0,n.jsx)(tl,{...a,...o,ref:t})}).displayName=t$;var tG=r(2185);let tX=tP,tY=tL,tJ=tC,tq=a.forwardRef((e,t)=>{let{className:r,sideOffset:o=4,...a}=e;return(0,n.jsx)(tM,{children:(0,n.jsx)(tU,{ref:t,sideOffset:o,className:(0,tG.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...a})})});tq.displayName=tU.displayName},3582:e=>{!function(){var t={229:function(e){var t,r,o,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var s=[],c=!1,d=-1;function u(){c&&o&&(c=!1,o.length?s=o.concat(s):d=-1,s.length&&m())}function m(){if(!c){var e=l(u);c=!0;for(var t=s.length;t;){for(o=s,s=[];++d<t;)o&&o[d].run();d=-1,t=s.length}o=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new f(e,t)),1!==s.length||c||l(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,o),i=!1}finally{i&&delete r[e]}return a.exports}o.ab="//",e.exports=o(229)}()},3601:(e,t,r)=>{"use strict";var o,n;e.exports=(null==(o=r.g.process)?void 0:o.env)&&"object"==typeof(null==(n=r.g.process)?void 0:n.env)?r.g.process:r(3582)},4011:(e,t,r)=>{"use strict";var o,n;r.d(t,{Rx:()=>b,D3:()=>S,I6:()=>y,G5:()=>v,ml:()=>g}),function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.FFPROBE="FFPROBE",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"}(o||(o={}));let a=(()=>{let e=0;return()=>e++})();Error("unknown message type");let i=Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),l=Error("called FFmpeg.terminate()");Error("failed to import ffmpeg-core.js");class s{#e=null;#t={};#r={};#o=[];#n=[];loaded=!1;#a=()=>{this.#e&&(this.#e.onmessage=({data:{id:e,type:t,data:r}})=>{switch(t){case o.LOAD:this.loaded=!0,this.#t[e](r);break;case o.MOUNT:case o.UNMOUNT:case o.EXEC:case o.FFPROBE:case o.WRITE_FILE:case o.READ_FILE:case o.DELETE_FILE:case o.RENAME:case o.CREATE_DIR:case o.LIST_DIR:case o.DELETE_DIR:this.#t[e](r);break;case o.LOG:this.#o.forEach(e=>e(r));break;case o.PROGRESS:this.#n.forEach(e=>e(r));break;case o.ERROR:this.#r[e](r)}delete this.#t[e],delete this.#r[e]})};#i=({type:e,data:t},r=[],o)=>this.#e?new Promise((n,i)=>{let l=a();this.#e&&this.#e.postMessage({id:l,type:e,data:t},r),this.#t[l]=n,this.#r[l]=i,o?.addEventListener("abort",()=>{i(new DOMException(`Message # ${l} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(i);on(e,t){"log"===e?this.#o.push(t):"progress"===e&&this.#n.push(t)}off(e,t){"log"===e?this.#o=this.#o.filter(e=>e!==t):"progress"===e&&(this.#n=this.#n.filter(e=>e!==t))}load=({classWorkerURL:e,...t}={},{signal:n}={})=>(this.#e||(this.#e=e?new Worker(new URL(e,"file:///C:/Users/zdhpe/Desktop/New%20folder/OpenCut/apps/web/node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js"),{type:"module"}):new Worker(r.tu(new URL(r.p+r.u(620),r.b)),{type:void 0}),this.#a()),this.#i({type:o.LOAD,data:t},void 0,n));exec=(e,t=-1,{signal:r}={})=>this.#i({type:o.EXEC,data:{args:e,timeout:t}},void 0,r);ffprobe=(e,t=-1,{signal:r}={})=>this.#i({type:o.FFPROBE,data:{args:e,timeout:t}},void 0,r);terminate=()=>{for(let e of Object.keys(this.#r))this.#r[e](l),delete this.#r[e],delete this.#t[e];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(e,t,{signal:r}={})=>{let n=[];return t instanceof Uint8Array&&n.push(t.buffer),this.#i({type:o.WRITE_FILE,data:{path:e,data:t}},n,r)};mount=(e,t,r)=>this.#i({type:o.MOUNT,data:{fsType:e,options:t,mountPoint:r}},[]);unmount=e=>this.#i({type:o.UNMOUNT,data:{mountPoint:e}},[]);readFile=(e,t="binary",{signal:r}={})=>this.#i({type:o.READ_FILE,data:{path:e,encoding:t}},void 0,r);deleteFile=(e,{signal:t}={})=>this.#i({type:o.DELETE_FILE,data:{path:e}},void 0,t);rename=(e,t,{signal:r}={})=>this.#i({type:o.RENAME,data:{oldPath:e,newPath:t}},void 0,r);createDir=(e,{signal:t}={})=>this.#i({type:o.CREATE_DIR,data:{path:e}},void 0,t);listDir=(e,{signal:t}={})=>this.#i({type:o.LIST_DIR,data:{path:e}},void 0,t);deleteDir=(e,{signal:t}={})=>this.#i({type:o.DELETE_DIR,data:{path:e}},void 0,t)}!function(e){e.MEMFS="MEMFS",e.NODEFS="NODEFS",e.NODERAWFS="NODERAWFS",e.IDBFS="IDBFS",e.WORKERFS="WORKERFS",e.PROXYFS="PROXYFS"}(n||(n={}));let c=Error("failed to get response body reader"),d=Error("failed to complete download"),u=async(e,t)=>{let r,o=await fetch(e);try{let n=parseInt(o.headers.get("Content-Length")||"-1"),a=o.body?.getReader();if(!a)throw c;let i=[],l=0;for(;;){let{done:r,value:o}=await a.read(),s=o?o.length:0;if(r){if(-1!=n&&n!==l)throw d;t&&t({url:e,total:n,received:l,delta:s,done:r});break}i.push(o),l+=s,t&&t({url:e,total:n,received:l,delta:s,done:r})}let s=new Uint8Array(l),u=0;for(let e of i)s.set(e,u),u+=e.length;r=s.buffer}catch(n){console.log("failed to send download progress event: ",n),r=await o.arrayBuffer(),t&&t({url:e,total:r.byteLength,received:r.byteLength,delta:0,done:!0})}return r},m=async(e,t,r=!1,o)=>{let n=new Blob([r?await u(e,o):await (await fetch(e)).arrayBuffer()],{type:t});return URL.createObjectURL(n)},f=null,p=!1,h=null,g=async()=>f&&p?f:h?(console.log("⏳ FFmpeg initialization already in progress, waiting..."),h):h=(async()=>{try{f=new s;let e="/ffmpeg",t=await m("".concat(e,"/ffmpeg-core.js"),"text/javascript"),r=await m("".concat(e,"/ffmpeg-core.wasm"),"application/wasm");await f.load({coreURL:t,wasmURL:r}),p=!0;try{f.on("log",e=>{let{message:t}=e;(t.includes("Error")||t.includes("Warning")||t.includes("Failed"))&&console.log("FFmpeg:",t)})}catch(e){}return f}catch(e){throw console.error("❌ Failed to initialize FFmpeg:",e),f=null,p=!1,h=null,Error("FFmpeg initialization failed: ".concat(e))}})(),y=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=await g(),o="input.mp4",n="thumbnail.jpg";await r.writeFile(o,new Uint8Array(await e.arrayBuffer())),await r.exec(["-i",o,"-ss",t.toString(),"-vframes","1","-vf","scale=160:120","-q:v","5","-update","1",n]);let a=new Blob([await r.readFile(n)],{type:"image/jpeg"});return await r.deleteFile(o),await r.deleteFile(n),URL.createObjectURL(a)},v=async e=>{let t=await g();if(!t||!p)throw Error("FFmpeg failed to initialize properly");let r="input.mp4",o=await e.arrayBuffer();await t.writeFile(r,new Uint8Array(o));let n="",a=!0,i=e=>{if(a){let t=e.message||e.data||e;"string"==typeof t&&(n+=t+"\n")}};try{t.on("log",i)}catch(e){console.warn("Could not set up FFmpeg log listener:",e)}try{await t.exec(["-i",r,"-f","null","-"])}catch(e){console.log("FFmpeg info extraction completed (expected error):",e)}a=!1;try{t.off("log",i)}catch(e){console.warn("Could not remove FFmpeg log listener:",e)}if(await t.deleteFile(r),!n||0===n.trim().length)throw console.error("No FFmpeg output received"),Error("Failed to extract video info. The file may be corrupted or in an unsupported format.");let l=n.match(/Duration: (\d+):(\d+):([\d.]+)/),s=0;if(l){let[,e,t,r]=l;s=3600*parseInt(e)+60*parseInt(t)+parseFloat(r)}let c=n.match(/Video:.* (\d+)x(\d+)[^,]*, ([\d.]+) fps/),d=0,u=0,m=0;return c&&(d=parseInt(c[1]),u=parseInt(c[2]),m=parseFloat(c[3])),{duration:s,width:d,height:u,fps:m}},b=async(e,t)=>{var r;let o=await g();if(!e||0===e.length)throw Error("No frames provided for video encoding");for(let t=0;t<e.length;t++){let r=e[t];if(!r.name||!r.data||0===r.data.length)throw Error("Invalid frame at index ".concat(t,": missing name or data"));if(r.data.length>0x3200000)throw Error("Frame ".concat(t," is too large: ").concat(r.data.length," bytes"))}console.log("\uD83C\uDFAC Encoding ".concat(e.length," frames to video (").concat(t.fps," fps)"));let n=null!=(r=t.format)?r:"mp4",a="output.".concat(n);t.onProgress&&o.on("progress",e=>{let{progress:r}=e;t.onProgress(100*r)});try{for(let t of e)try{await o.writeFile(t.name,t.data)}catch(e){throw console.error("Failed to write frame ".concat(t.name,":"),e),Error("Failed to write frame ".concat(t.name,": ").concat(e))}let r=["-r",String(t.fps),"-i","frame-%05d.png","-c:v","libx264","-preset","ultrafast","-crf","23","-pix_fmt","yuv420p","-movflags","+faststart","-max_muxing_queue_size","1024",a];console.log("\uD83D\uDD27 FFmpeg command:",r.join(" ")),await o.exec(r);let i=await o.readFile(a);if(!i||0===i.length)throw Error("FFmpeg produced empty output file");let l=new Blob([i],{type:"video/".concat(n)});console.log("✅ Video encoded successfully: ".concat(l.size," bytes"));try{for(let t of e)await o.deleteFile(t.name);await o.deleteFile(a)}catch(e){console.warn("Cleanup warning (non-fatal):",e)}return l}catch(t){console.error("❌ Video encoding failed:",t);try{for(let t of e)await o.deleteFile(t.name).catch(()=>{});await o.deleteFile(a).catch(()=>{})}catch(e){console.warn("Cleanup failed:",e)}throw t}},w=async e=>(await v(e)).duration,E=async e=>new Promise((t,r)=>{let o=document.createElement("video"),n=URL.createObjectURL(e),a=()=>{URL.revokeObjectURL(n),o.remove()};o.addEventListener("loadedmetadata",()=>{let e={duration:o.duration||10,width:o.videoWidth||1920,height:o.videoHeight||1080,fps:30};a(),t(e)}),o.addEventListener("error",e=>{a(),r(Error("HTML5 video loading failed: ".concat(e)))}),o.src=n,o.load(),setTimeout(()=>{a(),r(Error("HTML5 video info extraction timed out"))},1e4)}),x=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{timestamps:r=[1],resolution:o="medium",quality:n=.8,format:a="jpeg"}=t,{width:i,height:l}={low:{width:160,height:120},medium:{width:320,height:240},high:{width:480,height:360}}[o];return new Promise((t,o)=>{let l;if(!e||!(e instanceof File))return void o(Error("Invalid video file provided for thumbnail generation"));if(e.type&&!e.type.startsWith("video/"))return void o(Error("Invalid file type for thumbnail generation: ".concat(e.type)));if(0===e.size)return void o(Error("Video file is empty (0 bytes)"));e.size>524288e3&&console.warn("Large video file detected:",e.size,"bytes. This may cause performance issues.");let s=document.createElement("video"),c=document.createElement("canvas"),d=c.getContext("2d");try{l=URL.createObjectURL(e)}catch(e){o(Error("Failed to create object URL: ".concat(e instanceof Error?e.message:"Unknown error")));return}if(!d){URL.revokeObjectURL(l),o(Error("Failed to create canvas context"));return}let u=[],m=0,f=null,p=()=>{f&&(clearTimeout(f),f=null),URL.revokeObjectURL(l),s.remove(),c.remove()},h=()=>{if(m>=r.length){p(),t({thumbnails:u,metadata:{duration:s.duration,dimensions:{width:s.videoWidth,height:s.videoHeight},fps:30,timestamps:r}});return}r[m];let e=s.videoWidth/s.videoHeight;c.width=i,c.height=i/e,d.drawImage(s,0,0,c.width,c.height),c.toBlob(e=>{if(e){let t=URL.createObjectURL(e);u.push(t)}++m<r.length?s.currentTime=Math.min(r[m],s.duration-.1):h()},"image/".concat(a),n)};s.addEventListener("loadedmetadata",()=>{r.length>0&&(s.currentTime=Math.min(r[0],s.duration-.1))}),s.addEventListener("seeked",()=>{h()}),s.addEventListener("error",t=>{console.error("Video loading error details:",t),console.error("Video error state:",{error:s.error,networkState:s.networkState,readyState:s.readyState,src:s.src,fileType:e.type,fileSize:e.size}),p();let r="Unknown error";if(s.error)switch(s.error.code){case s.error.MEDIA_ERR_ABORTED:r="Video playback was aborted";break;case s.error.MEDIA_ERR_NETWORK:r="Network error while loading video";break;case s.error.MEDIA_ERR_DECODE:r="Browser cannot decode this video format (normal for some H.264 files)";break;case s.error.MEDIA_ERR_SRC_NOT_SUPPORTED:r="Video format not supported by browser";break;default:r=s.error.message||"Unknown video error"}o(Error("Canvas thumbnail generation failed: Video loading error - ".concat(r)))}),s.crossOrigin="anonymous",s.muted=!0,s.preload="metadata",s.src=l,s.load(),f=setTimeout(()=>{p(),o(Error("Canvas thumbnail generation timed out - will try FFmpeg fallback"))},3e3)})},T=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,o=await w(t);return Array.from({length:r},(e,t)=>o/(r+1)*(t+1))},S=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||0===e.size)throw Error("Invalid or empty video file provided for thumbnail generation");if(!e||!e.type)return console.error("Invalid file for thumbnail generation: file or MIME type is missing",{fileName:null==e?void 0:e.name,fileType:null==e?void 0:e.type,fileSize:null==e?void 0:e.size}),{thumbnails:[],metadata:{duration:0,dimensions:{width:0,height:0},fps:0,timestamps:[]}};let r=e.type;if(!r||!r.startsWith("video/")){let t=e.name.toLowerCase();if(t.endsWith(".mp4"))r="video/mp4";else if(t.endsWith(".webm"))r="video/webm";else if(t.endsWith(".mov"))r="video/quicktime";else throw Error("Invalid file type for thumbnail generation: ".concat(e.type||"unknown"," (filename: ").concat(e.name,")"))}try{let o=e;return r!==e.type&&(o=new File([e],e.name,{type:r,lastModified:e.lastModified})),await x(o,t)}catch(e){console.log("⚠️ Canvas method failed, using FFmpeg fallback:",e instanceof Error?e.message:String(e))}try{let r=await g();if(!r||!p)throw console.error("❌ FFMPEG-UTILS: FFmpeg not properly initialized"),Error("FFmpeg failed to initialize properly");try{let t=await e.arrayBuffer();if(0===t.byteLength)throw Error("Video file appears to be empty")}catch(e){throw Error("Video file is not accessible or corrupted")}return await k(r,e,t)}catch(e){return console.error("❌ FFMPEG-UTILS: generateEnhancedThumbnails failed:",e),{thumbnails:[],metadata:{duration:10,dimensions:{width:1920,height:1080},fps:30,timestamps:[]}}}},k=async function(e,t){let r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{r=await E(t)}catch(e){console.error("HTML5 video info extraction failed:",e);try{r=await v(t)}catch(e){console.error("FFmpeg video info extraction also failed:",e),r={duration:10,width:1920,height:1080,fps:30}}}let{timestamps:n=[1],resolution:a="medium",format:i="jpeg",sceneDetection:l=!1,quality:s=.8}=o,{width:c,height:d}={low:{width:160,height:120},medium:{width:320,height:240},high:{width:480,height:360}}[a],u=(l?await T(e,t,n.length):n).filter(e=>e<r.duration),m="input.mp4";await e.writeFile(m,new Uint8Array(await t.arrayBuffer()));let f=[];for(let t=0;t<u.length;t++){let r=u[t],o="thumb_".concat(Math.floor(1e3*r),".").concat(i);try{await e.exec(["-i",m,"-ss",r.toString(),"-vframes","1","-vf","scale=".concat(c,":").concat(d),"-q:v",1===s?"1":.8===s?"2":"5","-f","jpeg"===i?"mjpeg":i,o]);try{let t=await e.readFile(o);if(t.length>0){let e=new Blob([t],{type:"image/".concat(i)}),r=URL.createObjectURL(e);f.push(r)}}catch(e){console.error("❌ FFMPEG-UTILS: Failed to read thumbnail file ".concat(o,":"),e)}try{await e.deleteFile(o)}catch(e){console.warn("Could not delete thumbnail file ".concat(o,":"),e)}}catch(e){if(console.error("❌ FFMPEG-UTILS: FFmpeg exec failed for thumbnail ".concat(t+1,":"),e),e&&e.toString().includes("Aborted")){console.error("\uD83D\uDCA5 FFMPEG-UTILS: FFmpeg aborted - this might cause app instability");break}continue}}return await e.deleteFile(m),{thumbnails:f,metadata:{duration:r.duration,dimensions:{width:r.width,height:r.height},fps:r.fps,timestamps:u}}}},4309:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}loadLogs(){try{let e=localStorage.getItem(this.storageKey);e&&(this.logs=JSON.parse(e))}catch(e){console.error("Failed to load debug logs:",e)}}saveLogs(){try{this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),localStorage.setItem(this.storageKey,JSON.stringify(this.logs))}catch(e){console.error("Failed to save debug logs:",e)}}log(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={timestamp:Date.now(),component:e,event:t,data:r};this.logs.push(o),this.saveLogs(),!["RENDERING_EDITOR_INTERFACE","RENDER","TIMELINE_RENDER","MEDIA_PANEL_RENDER"].includes(t)&&this.enabled&&console.log("[DEBUG] ".concat(e," - ").concat(t,":"),r)}clearLogs(){this.logs=[],localStorage.removeItem(this.storageKey)}getLogs(){return[...this.logs]}getFormattedLogs(){return this.logs.map(e=>{let t=new Date(e.timestamp);return"[".concat(t.toISOString(),"] ").concat(e.component," - ").concat(e.event,": ").concat(JSON.stringify(e.data,null,2))}).join("\n\n")}exportLogs(){let e=new Blob([this.getFormattedLogs()],{type:"text/plain"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="opencut-debug-logs-".concat(Date.now(),".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),console.log("\uD83D\uDCC1 Debug logs downloaded to your Downloads folder")}async saveLogsToProject(){let e=this.getFormattedLogs(),t=Date.now(),r="debug-logs-".concat(t,".txt");try{var o;if(null==(o=window.electronAPI)?void 0:o.writeFile)return await window.electronAPI.writeFile(r,e),console.log("\uD83D\uDCC1 Logs saved to project directory: ".concat(r)),r;return this.exportLogs(),null}catch(e){return console.error("Failed to save logs to project:",e),this.exportLogs(),null}}constructor(){this.logs=[],this.maxLogs=1e3,this.storageKey="opencut-debug-logs",this.enabled=!1,this.loadLogs()}}let n=o.getInstance();window.debugLogger=n},4650:(e,t,r)=>{"use strict";r.d(t,{F:()=>a});let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=function(){for(var e,t,r=0,o="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,o,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(o=e(t[r]))&&(n&&(n+=" "),n+=o)}else for(o in t)t[o]&&(n&&(n+=" "),n+=o);return n}(e))&&(o&&(o+=" "),o+=t);return o},a=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:l}=t,s=Object.keys(i).map(e=>{let t=null==r?void 0:r[e],n=null==l?void 0:l[e];if(null===t)return null;let a=o(t)||o(n);return i[e][a]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,o]=t;return void 0===o||(e[r]=o),e},{});return n(e,s,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:o,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,o]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},6003:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var o=r(6029),n=r(5729),a=r(9358),i=r(4650),l=r(2185);let s=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gray-900 text-white shadow hover:bg-gray-800 !bg-gray-900 !text-white",primary:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",text:"bg-transparent p-0 rounded-none hover:text-muted-foreground",link:"text-primary underline-offset-4 hover:underline",shimmer:"relative overflow-hidden rounded-full bg-black text-white shadow-lg hover:shadow-xl before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/30 before:to-transparent"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-sm px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-7 w-7"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.DX:"button";return(0,o.jsx)(u,{className:(0,l.cn)(s({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},6021:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(539)}])},6202:(e,t,r)=>{"use strict";r.d(t,{Oy:()=>n,aI:()=>s,hX:()=>l,xK:()=>a,zb:()=>i});var o=r(2185);function n(e){return[...e].sort((e,t)=>"audio"===e.type&&"audio"!==t.type?1:"audio"===t.type&&"audio"!==e.type?-1:e.isMain&&!t.isMain&&"audio"!==t.type?1:t.isMain&&!e.isMain&&"audio"!==e.type?-1:0)}function a(e){return e.find(e=>e.isMain)||null}function i(e){return e.some(e=>e.isMain)?e:[{id:(0,o.l)(),name:"Main Track",type:"media",elements:[],muted:!1,isMain:!0},...e]}function l(e,t){return"text"===e?"text"===t:"media"===e&&("media"===t||"audio"===t)}function s(e,t){return l(e.type,t.type)?{isValid:!0}:{isValid:!1,errorMessage:"text"===e.type?"Text elements can only be placed on text tracks":"Media elements can only be placed on media or audio tracks"}}},6749:(e,t,r)=>{"use strict";r.r(t),r.d(t,{generateVideoThumbnail:()=>m,getFileType:()=>d,getImageDimensions:()=>u,getMediaAspectRatio:()=>p,getMediaDuration:()=>f,useMediaStore:()=>h});var o=r(8106),n=r(1375),a=r(2185),i=r(4011);class l{async cacheThumbnail(e,t,r,o){this.cache[e]||(this.cache[e]={});let n={low:5120,medium:15360,high:30720}[o];this.currentCacheSize+n>this.maxCacheSize&&this.evictLeastRecentlyUsed(),this.cache[e][t]={url:r,timestamp:t,resolution:o,size:n,lastAccessed:Date.now()},this.currentCacheSize+=n}getThumbnail(e,t){return this.cache[e]&&this.cache[e][t]?(this.cache[e][t].lastAccessed=Date.now(),this.cache[e][t].url):null}getClosestThumbnail(e,t){if(!this.cache[e])return null;let r=Object.keys(this.cache[e]).map(Number);if(0===r.length)return null;let o=r[0],n=Math.abs(r[0]-t);for(let e of r){let r=Math.abs(e-t);r<n&&(n=r,o=e)}return this.getThumbnail(e,o)}clearVideoCache(e){if(!this.cache[e])return;let t=0;for(let r in this.cache[e]){let o=this.cache[e][r];t+=o.size,URL.revokeObjectURL(o.url)}delete this.cache[e],this.currentCacheSize-=t}clearAllCache(){for(let e in this.cache)for(let t in this.cache[e])URL.revokeObjectURL(this.cache[e][t].url);this.cache={},this.currentCacheSize=0}evictLeastRecentlyUsed(){let e=Date.now(),t="",r=0;for(let o in this.cache)for(let n in this.cache[o]){let a=this.cache[o][n];a.lastAccessed<e&&(e=a.lastAccessed,t=o,r=Number(n))}if(t&&this.cache[t]){let e=this.cache[t][r];e&&(URL.revokeObjectURL(e.url),this.currentCacheSize-=e.size,delete this.cache[t][r],0===Object.keys(this.cache[t]).length&&delete this.cache[t])}}getCacheStats(){let e=0;for(let t in this.cache)e+=Object.keys(this.cache[t]).length;return{totalSize:this.currentCacheSize,videoCount:Object.keys(this.cache).length,thumbnailCount:e,sizeInMB:this.currentCacheSize/1048576}}constructor(){this.cache={},this.maxCacheSize=0x3200000,this.currentCacheSize=0}}let s=new l,c=new Map,d=e=>{let{type:t}=e;return t.startsWith("image/")?"image":t.startsWith("video/")?"video":t.startsWith("audio/")?"audio":null},u=e=>new Promise((t,r)=>{let o=new window.Image;o.addEventListener("load",()=>{t({width:o.naturalWidth,height:o.naturalHeight}),o.remove()}),o.addEventListener("error",()=>{r(Error("Could not load image")),o.remove()}),o.src=URL.createObjectURL(e)}),m=e=>new Promise((t,r)=>{let o=document.createElement("video"),n=document.createElement("canvas"),a=n.getContext("2d");if(!a)return void r(Error("Could not get canvas context"));o.addEventListener("loadedmetadata",()=>{n.width=o.videoWidth,n.height=o.videoHeight,o.currentTime=Math.min(1,.1*o.duration)}),o.addEventListener("seeked",()=>{a.drawImage(o,0,0,n.width,n.height);let e=n.toDataURL("image/jpeg",.8);t({thumbnailUrl:e,width:o.videoWidth,height:o.videoHeight}),o.remove(),n.remove()}),o.addEventListener("error",()=>{r(Error("Could not load video")),o.remove(),n.remove()}),o.src=URL.createObjectURL(e),o.load()}),f=e=>new Promise((t,r)=>{let o=document.createElement(e.type.startsWith("video/")?"video":"audio");o.addEventListener("loadedmetadata",()=>{t(o.duration),o.remove()}),o.addEventListener("error",()=>{r(Error("Could not load media")),o.remove()}),o.src=URL.createObjectURL(e),o.load()}),p=e=>e.width&&e.height?e.width/e.height:16/9,h=(0,o.v)((e,t)=>({mediaItems:[],isLoading:!1,addMediaItem:async(t,r)=>{var o,i;console.log("\uD83D\uDCE5 MEDIA-STORE: addMediaItem called with:",{projectId:t,itemName:r.name,itemType:r.type,hasFile:!!r.file,hasUrl:!!r.url,fileSize:null==(o=r.file)?void 0:o.size,fileType:null==(i=r.file)?void 0:i.type,width:r.width,height:r.height});let l={...r,id:(0,a.l)()};r.file&&!r.url&&("image"===r.type?(console.log("\uD83D\uDD17 MEDIA-STORE: Creating object URL for edited image"),l.url=URL.createObjectURL(r.file)):"video"===r.type&&(console.log("\uD83D\uDD17 MEDIA-STORE: Creating object URL for video"),l.url=URL.createObjectURL(r.file))),console.log("\uD83C\uDD95 MEDIA-STORE: Created new media item:",{id:l.id,name:l.name,hasUrl:!!l.url,urlPreview:l.url?l.url.substring(0,100)+"...":"none"}),e(e=>({mediaItems:[...e.mediaItems,l]}));try{await n.P.saveMediaItem(t,l),"video"===l.type&&l.file&&console.log("\uD83D\uDEAB Auto-generation of timeline previews disabled to prevent FFmpeg errors")}catch(t){console.error("Failed to save media item:",t),e(e=>({mediaItems:e.mediaItems.filter(e=>e.id!==l.id)}))}return l.id},removeMediaItem:async(r,o)=>{let a=t().mediaItems.find(e=>e.id===o);a&&a.url&&(URL.revokeObjectURL(a.url),a.thumbnailUrl&&URL.revokeObjectURL(a.thumbnailUrl)),e(e=>({mediaItems:e.mediaItems.filter(e=>e.id!==o)}));try{await n.P.deleteMediaItem(r,o)}catch(e){console.error("Failed to delete media item:",e)}},loadProjectMedia:async t=>{e({isLoading:!0});try{let r=await n.P.loadAllMediaItems(t);e({mediaItems:r})}catch(e){console.error("Failed to load media items:",e)}finally{e({isLoading:!1})}},clearProjectMedia:async r=>{let o=t();o.mediaItems.forEach(e=>{e.url&&URL.revokeObjectURL(e.url),e.thumbnailUrl&&URL.revokeObjectURL(e.thumbnailUrl)}),e({mediaItems:[]});try{let e=o.mediaItems.map(e=>e.id);await Promise.all(e.map(e=>n.P.deleteMediaItem(r,e)))}catch(e){console.error("Failed to clear media items from storage:",e)}},clearAllMedia:()=>{t().mediaItems.forEach(e=>{e.url&&URL.revokeObjectURL(e.url),e.thumbnailUrl&&URL.revokeObjectURL(e.thumbnailUrl)}),e({mediaItems:[]})},addGeneratedImages:r=>{console.log("\uD83C\uDFA8 MEDIA-STORE: addGeneratedImages() called with",r.length,"items"),console.log("\uD83C\uDFA8 MEDIA-STORE: Current mediaItems count before adding:",t().mediaItems.length);let o=r.map(e=>({...e,id:(0,a.l)(),metadata:{...e.metadata,source:"text2image"}}));console.log("\uD83C\uDFA8 MEDIA-STORE: Generated IDs for new items:",o.map(e=>{var t;return{id:e.id,name:e.name,url:(null==(t=e.url)?void 0:t.substring(0,50))+"..."}})),e(e=>({mediaItems:[...e.mediaItems,...o]})),o.forEach(async(t,r)=>{if(t.url&&!t.file)try{var o;let r=await fetch(t.url);if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let n=await r.blob(),a=t.url.split("/"),i=a[a.length-1].split("?")[0],l=t.name||i||"generated-image";if((null==(o=t.metadata)?void 0:o.source)==="text2image"&&!l.includes(".")){let e=n.type||"image/png",r=e.split("/")[1]||"png";l="".concat(l,".").concat(r),console.log("\uD83D\uDD27 MEDIA-STORE: Added extension to generated image filename",{originalName:t.name,newFileName:l,mimeType:e})}let s=new File([n],l,{type:n.type||"image/png",lastModified:Date.now()});e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t.id?{...e,file:s,size:s.size}:e)}));let c=new FileReader;c.onload=()=>{let r=c.result;console.log("\uD83D\uDD04 MEDIA-STORE: Converting to data URL for export stability",{mediaId:t.id,originalSize:n.size,dataUrlSize:r.length,mimeType:n.type}),e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t.id?{...e,url:r,metadata:{...e.metadata,originalBlobSize:n.size,convertedAt:Date.now()}}:e)})),console.log("✅ MEDIA-STORE: Replaced blob URL with data URL for",t.name)},c.readAsDataURL(n)}catch(r){e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t.id?{...e,thumbnailError:"Failed to download image: ".concat(r instanceof Error?r.message:"Unknown error")}:e)}))}})},generateEnhancedThumbnails:async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t().mediaItems.find(e=>e.id===r);if(!n||!n.file||"video"!==n.type)return;let a=c.get(r);if(a)return console.log("⏳ Thumbnail generation already in progress for ".concat(r,", waiting...")),a;let l=n.file,d=(async()=>{t().updateProcessingStage(r,"thumbnail-ffmpeg");try{var a;let c={resolution:o.resolution||"medium",timestamps:o.timestamps||[1,n.duration?.25*n.duration:5,n.duration?.5*n.duration:10,n.duration?.75*n.duration:15].filter(e=>!n.duration||e<n.duration),sceneDetection:null==(a=o.sceneDetection)||a,quality:o.quality||.8,format:o.format||"jpeg"};Date.now();let d=[],u={timestamps:[],duration:0};try{let e=await (0,i.D3)(l,c);d=e.thumbnails,u=e.metadata}catch(e){console.error("❌ Thumbnail generation failed:",{mediaId:r,error:e,fileName:null==l?void 0:l.name,fileType:null==l?void 0:l.type}),d=[],u={timestamps:[],duration:0}}for(let e=0;e<d.length;e++)await s.cacheThumbnail(r,u.timestamps[e],d[e],c.resolution);t().updateProcessingStage(r,"complete"),e(e=>({mediaItems:e.mediaItems.map(e=>e.id===r?{...e,thumbnails:d,thumbnailTimestamps:u.timestamps,thumbnailUrl:d[0],thumbnailError:void 0,thumbnailResolution:c.resolution,thumbnailMetadata:{sceneDetected:c.sceneDetection||!1,generatedAt:Date.now(),cacheSize:d.length}}:e)}))}catch(o){console.error("Failed to generate enhanced thumbnails:",o),t().updateProcessingStage(r,"error"),e(e=>({mediaItems:e.mediaItems.map(e=>e.id===r?{...e,thumbnailError:o instanceof Error?o.message:"Unknown error"}:e)}))}finally{c.delete(r)}})();return c.set(r,d),d},getThumbnailAtTime:(e,r)=>{let o=t().mediaItems.find(t=>t.id===e);if(!(null==o?void 0:o.thumbnails)||!(null==o?void 0:o.thumbnailTimestamps))return s.getClosestThumbnail(e,r);let n=0,a=Math.abs(o.thumbnailTimestamps[0]-r);for(let e=1;e<o.thumbnailTimestamps.length;e++){let t=Math.abs(o.thumbnailTimestamps[e]-r);t<a&&(a=t,n=e)}return o.thumbnails[n]},setThumbnailQuality:async(e,r)=>{var o,n;let a=t().mediaItems.find(t=>t.id===e);a&&"video"===a.type&&(s.clearVideoCache(e),await t().generateEnhancedThumbnails(e,{resolution:r,timestamps:a.thumbnailTimestamps||[1,5,10,15,20],sceneDetection:null==(n=null==(o=a.thumbnailMetadata)?void 0:o.sceneDetected)||n}))},clearThumbnailCache:()=>{s.clearAllCache(),console.log("Thumbnail cache cleared")},generateTimelinePreviews:async(e,t)=>{console.log("\uD83D\uDEAB MEDIA-STORE: Timeline preview generation disabled to prevent FFmpeg errors")},getTimelinePreviewStrip:(e,r,o)=>{var n;let a=t().mediaItems.find(t=>t.id===e);if(!(null==a?void 0:a.timelinePreviews))return console.log("No timeline previews available for:",e),[];let{thumbnails:i,density:l,generatedAt:s}=a.timelinePreviews;console.log("\uD83D\uDD0D Timeline previews found:",{mediaId:e,thumbnailCount:i.length,firstThumbnailUrl:(null==(n=i[0])?void 0:n.substring(0,50))+"...",density:l,zoomLevel:o}),Date.now()-s>3e5&&console.log("Timeline previews are stale, regeneration recommended");let c=Math.max(1,Math.floor(o*l)),d=Math.max(1,Math.floor(i.length/c)),u=i.filter((e,t)=>t%d==0);return console.log("\uD83D\uDCCA Timeline preview strip:",{selectedCount:u.length,totalCount:i.length,zoomLevel:o,step:d,sampleUrls:u.slice(0,2).map(e=>e.substring(0,50)+"...")}),u},getTimelinePreviewAtPosition:(e,r,o)=>{let n=t().mediaItems.find(t=>t.id===e);if(!(null==n?void 0:n.timelinePreviews))return null;let a=r*o,{thumbnails:i,timestamps:l}=n.timelinePreviews,s=0,c=Math.abs(l[0]-a);for(let e=1;e<l.length;e++){let t=Math.abs(l[e]-a);t<c&&(c=t,s=e)}return{thumbnailUrl:i[s],timestamp:l[s],exactTimestamp:a}},clearTimelinePreviews:t=>{e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t?{...e,timelinePreviews:void 0}:e)})),s.clearVideoCache(t),console.log("Timeline previews cleared for:",t)},shouldRegenerateTimelinePreviews:(e,r,o)=>{let n=t().mediaItems.find(t=>t.id===e);if(!(null==n?void 0:n.timelinePreviews))return!0;let{zoomLevel:a,elementDuration:i,generatedAt:l,thumbnails:s}=n.timelinePreviews;if(!s||0===s.length)return console.log("\uD83D\uDD04 shouldRegenerateTimelinePreviews: true - no thumbnails exist"),!0;let c=Math.abs((a||1)-r)>.5,d=Math.abs((i||0)-o)>.1,u=Date.now()-l>6e5,m=c||d||u;return console.log("\uD83D\uDD04 shouldRegenerateTimelinePreviews:",m,{mediaId:e,thumbnailCount:s.length,zoomChanged:c,durationChanged:d,isOld:u}),m},isMediaItemReady:e=>{var r;let o=t().mediaItems.find(t=>t.id===e);return!!(o&&o.file instanceof File&&o.duration&&((null==(r=o.thumbnails)?void 0:r.length)||0)>0&&o.processingComplete)},updateProcessingStage:(t,r)=>{e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t?{...e,processingStage:r,processingComplete:"complete"===r,lastThumbnailUpdate:Date.now()}:e)}))},updateMediaItem:(t,r)=>{e(e=>({mediaItems:e.mediaItems.map(e=>e.id===t?{...e,...r}:e)}))}}))},6998:()=>{},7627:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var o=r(8106);let n=null,a=e=>{n&&cancelAnimationFrame(n);let t=()=>{let o=e();if(o.isPlaying&&o.currentTime<o.duration){let e=performance.now(),t=(e-r)/1e3;r=e;let n=o.currentTime+t*o.speed;n>=o.duration?(o.pause(),o.setCurrentTime(0),window.dispatchEvent(new CustomEvent("playback-seek",{detail:{time:0}}))):(o.setCurrentTime(n),window.dispatchEvent(new CustomEvent("playback-update",{detail:{time:n}})))}n=requestAnimationFrame(t)},r=performance.now();n=requestAnimationFrame(t)},i=()=>{n&&(cancelAnimationFrame(n),n=null)},l=(0,o.v)((e,t)=>({isPlaying:!1,currentTime:0,duration:0,volume:1,muted:!1,previousVolume:1,speed:1,play:()=>{e({isPlaying:!0}),a(t)},pause:()=>{e({isPlaying:!1}),i()},toggle:()=>{let{isPlaying:e}=t();e?t().pause():t().play()},seek:r=>{let{duration:o}=t(),n=Math.max(0,Math.min(o,r));e({currentTime:n});let a=new CustomEvent("playback-seek",{detail:{time:n}});window.dispatchEvent(a)},setVolume:t=>e(e=>({volume:Math.max(0,Math.min(1,t)),muted:0===t,previousVolume:t>0?t:e.previousVolume})),setSpeed:t=>{let r=Math.max(.1,Math.min(2,t));e({speed:r});let o=new CustomEvent("playback-speed",{detail:{speed:r}});window.dispatchEvent(o)},setDuration:t=>e({duration:t}),setCurrentTime:t=>e({currentTime:t}),mute:()=>{let{volume:r,previousVolume:o}=t();e({muted:!0,previousVolume:r>0?r:o,volume:0})},unmute:()=>{let{previousVolume:r}=t();e({muted:!1,volume:null!=r?r:1})},toggleMute:()=>{let{muted:e}=t();e?t().unmute():t().mute()}}))},8106:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});var o=r(5729);let n=e=>{let t,r=new Set,o=(e,o)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=o?o:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,a={setState:o,getState:n,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(o,n,a);return a},a=e=>e?n(e):n,i=e=>e,l=e=>{let t=a(e),r=e=>(function(e,t=i){let r=o.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return o.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},s=e=>e?l(e):l},9358:(e,t,r)=>{"use strict";r.d(t,{DX:()=>l,TL:()=>i,Dc:()=>c});var o=r(5729);function n(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var a=r(6029);function i(e){let t=function(e){let t=o.forwardRef((e,t)=>{let{children:r,...a}=e;if(o.isValidElement(r)){var i;let e,l,s=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let o in t){let n=e[o],a=t[o];/^on[A-Z]/.test(o)?n&&a?r[o]=(...e)=>{let t=a(...e);return n(...e),t}:n&&(r[o]=n):"style"===o?r[o]={...n,...a}:"className"===o&&(r[o]=[n,a].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==o.Fragment&&(c.ref=t?function(...e){return t=>{let r=!1,o=e.map(e=>{let o=n(e,t);return r||"function"!=typeof o||(r=!0),o});if(r)return()=>{for(let t=0;t<o.length;t++){let r=o[t];"function"==typeof r?r():n(e[t],null)}}}}(t,s):s),o.cloneElement(r,c)}return o.Children.count(r)>1?o.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),r=o.forwardRef((e,r)=>{let{children:n,...i}=e,l=o.Children.toArray(n),s=l.find(d);if(s){let e=s.props.children,n=l.map(t=>t!==s?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...i,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...i,ref:r,children:n})});return r.displayName=`${e}.Slot`,r}var l=i("Slot"),s=Symbol("radix.slottable");function c(e){let t=({children:e})=>(0,a.jsx)(a.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=s,t}function d(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===s}},9688:(e,t,r)=>{"use strict";r.d(t,{l$:()=>T,oR:()=>v});var o=r(5729),n=r(6760);let a=e=>{switch(e){case"success":return s;case"info":return d;case"warning":return c;case"error":return u;default:return null}},i=Array(12).fill(0),l=({visible:e,className:t})=>o.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},o.createElement("div",{className:"sonner-spinner"},i.map((e,t)=>o.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),s=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),c=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),d=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),u=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},o.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),m=o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),o.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),f=()=>{let[e,t]=o.useState(document.hidden);return o.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e},p=1;class h{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...o}=e,n="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:p++,a=this.toasts.find(e=>e.id===n),i=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(n)&&this.dismissedToasts.delete(n),a?this.toasts=this.toasts.map(t=>t.id===n?(this.publish({...t,...e,id:n,title:r}),{...t,...e,id:n,dismissible:i,title:r}):t):this.addToast({title:r,...o,dismissible:i,id:n}),n},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{let r,n;if(!t)return;void 0!==t.loading&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let a=Promise.resolve(e instanceof Function?e():e),i=void 0!==n,l=a.then(async e=>{if(r=["resolve",e],o.isValidElement(e))i=!1,this.create({id:n,type:"default",message:e});else if(y(e)&&!e.ok){i=!1;let r="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description,l="object"!=typeof r||o.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:a,...l})}else if(e instanceof Error){i=!1;let r="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description,l="object"!=typeof r||o.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:a,...l})}else if(void 0!==t.success){i=!1;let r="function"==typeof t.success?await t.success(e):t.success,a="function"==typeof t.description?await t.description(e):t.description,l="object"!=typeof r||o.isValidElement(r)?{message:r}:r;this.create({id:n,type:"success",description:a,...l})}}).catch(async e=>{if(r=["reject",e],void 0!==t.error){i=!1;let r="function"==typeof t.error?await t.error(e):t.error,a="function"==typeof t.description?await t.description(e):t.description,l="object"!=typeof r||o.isValidElement(r)?{message:r}:r;this.create({id:n,type:"error",description:a,...l})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),null==t.finally||t.finally.call(t)}),s=()=>new Promise((e,t)=>l.then(()=>"reject"===r[0]?t(r[1]):e(r[1])).catch(t));return"string"!=typeof n&&"number"!=typeof n?{unwrap:s}:Object.assign(n,{unwrap:s})},this.custom=(e,t)=>{let r=(null==t?void 0:t.id)||p++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}let g=new h,y=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,v=Object.assign((e,t)=>{let r=(null==t?void 0:t.id)||p++;return g.addToast({title:e,...t,id:r}),r},{success:g.success,info:g.info,warning:g.warning,error:g.error,custom:g.custom,message:g.message,promise:g.promise,dismiss:g.dismiss,loading:g.loading},{getHistory:()=>g.toasts,getToasts:()=>g.getActiveToasts()});function b(e){return void 0!==e.label}function w(...e){return e.filter(Boolean).join(" ")}!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");let E=e=>{var t,r,n,i,s,c,d,u,p,h,g;let{invert:y,toast:v,unstyled:E,interacting:x,setHeights:T,visibleToasts:S,heights:k,index:R,toasts:P,expanded:I,removeToast:j,defaultRichColors:A,closeButton:L,style:D,cancelButtonStyle:C,actionButtonStyle:O,className:N="",descriptionClassName:F="",duration:M,position:_,gap:U,expandByDefault:z,classNames:B,icons:H,closeButtonAriaLabel:V="Close toast"}=e,[W,$]=o.useState(null),[G,X]=o.useState(null),[Y,J]=o.useState(!1),[q,K]=o.useState(!1),[Z,Q]=o.useState(!1),[ee,et]=o.useState(!1),[er,eo]=o.useState(!1),[en,ea]=o.useState(0),[ei,el]=o.useState(0),es=o.useRef(v.duration||M||4e3),ec=o.useRef(null),ed=o.useRef(null),eu=0===R,em=R+1<=S,ef=v.type,ep=!1!==v.dismissible,eh=v.className||"",eg=v.descriptionClassName||"",ey=o.useMemo(()=>k.findIndex(e=>e.toastId===v.id)||0,[k,v.id]),ev=o.useMemo(()=>{var e;return null!=(e=v.closeButton)?e:L},[v.closeButton,L]),eb=o.useMemo(()=>v.duration||M||4e3,[v.duration,M]),ew=o.useRef(0),eE=o.useRef(0),ex=o.useRef(0),eT=o.useRef(null),[eS,ek]=_.split("-"),eR=o.useMemo(()=>k.reduce((e,t,r)=>r>=ey?e:e+t.height,0),[k,ey]),eP=f(),eI=v.invert||y,ej="loading"===ef;eE.current=o.useMemo(()=>ey*U+eR,[ey,eR]),o.useEffect(()=>{es.current=eb},[eb]),o.useEffect(()=>{J(!0)},[]),o.useEffect(()=>{let e=ed.current;if(e){let t=e.getBoundingClientRect().height;return el(t),T(e=>[{toastId:v.id,height:t,position:v.position},...e]),()=>T(e=>e.filter(e=>e.toastId!==v.id))}},[T,v.id]),o.useLayoutEffect(()=>{if(!Y)return;let e=ed.current,t=e.style.height;e.style.height="auto";let r=e.getBoundingClientRect().height;e.style.height=t,el(r),T(e=>e.find(e=>e.toastId===v.id)?e.map(e=>e.toastId===v.id?{...e,height:r}:e):[{toastId:v.id,height:r,position:v.position},...e])},[Y,v.title,v.description,T,v.id,v.jsx,v.action,v.cancel]);let eA=o.useCallback(()=>{K(!0),ea(eE.current),T(e=>e.filter(e=>e.toastId!==v.id)),setTimeout(()=>{j(v)},200)},[v,j,T,eE]);o.useEffect(()=>{let e;if((!v.promise||"loading"!==ef)&&v.duration!==1/0&&"loading"!==v.type)return I||x||eP?(()=>{if(ex.current<ew.current){let e=new Date().getTime()-ew.current;es.current=es.current-e}ex.current=new Date().getTime()})():es.current!==1/0&&(ew.current=new Date().getTime(),e=setTimeout(()=>{null==v.onAutoClose||v.onAutoClose.call(v,v),eA()},es.current)),()=>clearTimeout(e)},[I,x,v,ef,eP,eA]),o.useEffect(()=>{v.delete&&(eA(),null==v.onDismiss||v.onDismiss.call(v,v))},[eA,v.delete]);let eL=v.icon||(null==H?void 0:H[ef])||a(ef);return o.createElement("li",{tabIndex:0,ref:ed,className:w(N,eh,null==B?void 0:B.toast,null==v||null==(t=v.classNames)?void 0:t.toast,null==B?void 0:B.default,null==B?void 0:B[ef],null==v||null==(r=v.classNames)?void 0:r[ef]),"data-sonner-toast":"","data-rich-colors":null!=(h=v.richColors)?h:A,"data-styled":!(v.jsx||v.unstyled||E),"data-mounted":Y,"data-promise":!!v.promise,"data-swiped":er,"data-removed":q,"data-visible":em,"data-y-position":eS,"data-x-position":ek,"data-index":R,"data-front":eu,"data-swiping":Z,"data-dismissible":ep,"data-type":ef,"data-invert":eI,"data-swipe-out":ee,"data-swipe-direction":G,"data-expanded":!!(I||z&&Y),style:{"--index":R,"--toasts-before":R,"--z-index":P.length-R,"--offset":`${q?en:eE.current}px`,"--initial-height":z?"auto":`${ei}px`,...D,...v.style},onDragEnd:()=>{Q(!1),$(null),eT.current=null},onPointerDown:e=>{2!==e.button&&!ej&&ep&&(ec.current=new Date,ea(eE.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(Q(!0),eT.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,r,o,n;if(ee||!ep)return;eT.current=null;let a=Number((null==(e=ed.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),i=Number((null==(t=ed.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),l=new Date().getTime()-(null==(r=ec.current)?void 0:r.getTime()),s="x"===W?a:i,c=Math.abs(s)/l;if(Math.abs(s)>=45||c>.11){ea(eE.current),null==v.onDismiss||v.onDismiss.call(v,v),"x"===W?X(a>0?"right":"left"):X(i>0?"down":"up"),eA(),et(!0);return}null==(o=ed.current)||o.style.setProperty("--swipe-amount-x","0px"),null==(n=ed.current)||n.style.setProperty("--swipe-amount-y","0px"),eo(!1),Q(!1),$(null)},onPointerMove:t=>{var r,o,n,a;if(!eT.current||!ep||(null==(r=window.getSelection())?void 0:r.toString().length)>0)return;let i=t.clientY-eT.current.y,l=t.clientX-eT.current.x,s=null!=(a=e.swipeDirections)?a:function(e){let[t,r]=e.split("-"),o=[];return t&&o.push(t),r&&o.push(r),o}(_);!W&&(Math.abs(l)>1||Math.abs(i)>1)&&$(Math.abs(l)>Math.abs(i)?"x":"y");let c={x:0,y:0},d=e=>1/(1.5+Math.abs(e)/20);if("y"===W){if(s.includes("top")||s.includes("bottom"))if(s.includes("top")&&i<0||s.includes("bottom")&&i>0)c.y=i;else{let e=i*d(i);c.y=Math.abs(e)<Math.abs(i)?e:i}}else if("x"===W&&(s.includes("left")||s.includes("right")))if(s.includes("left")&&l<0||s.includes("right")&&l>0)c.x=l;else{let e=l*d(l);c.x=Math.abs(e)<Math.abs(l)?e:l}(Math.abs(c.x)>0||Math.abs(c.y)>0)&&eo(!0),null==(o=ed.current)||o.style.setProperty("--swipe-amount-x",`${c.x}px`),null==(n=ed.current)||n.style.setProperty("--swipe-amount-y",`${c.y}px`)}},ev&&!v.jsx&&"loading"!==ef?o.createElement("button",{"aria-label":V,"data-disabled":ej,"data-close-button":!0,onClick:ej||!ep?()=>{}:()=>{eA(),null==v.onDismiss||v.onDismiss.call(v,v)},className:w(null==B?void 0:B.closeButton,null==v||null==(n=v.classNames)?void 0:n.closeButton)},null!=(g=null==H?void 0:H.close)?g:m):null,(ef||v.icon||v.promise)&&null!==v.icon&&((null==H?void 0:H[ef])!==null||v.icon)?o.createElement("div",{"data-icon":"",className:w(null==B?void 0:B.icon,null==v||null==(i=v.classNames)?void 0:i.icon)},v.promise||"loading"===v.type&&!v.icon?v.icon||function(){var e,t;return(null==H?void 0:H.loading)?o.createElement("div",{className:w(null==B?void 0:B.loader,null==v||null==(t=v.classNames)?void 0:t.loader,"sonner-loader"),"data-visible":"loading"===ef},H.loading):o.createElement(l,{className:w(null==B?void 0:B.loader,null==v||null==(e=v.classNames)?void 0:e.loader),visible:"loading"===ef})}():null,"loading"!==v.type?eL:null):null,o.createElement("div",{"data-content":"",className:w(null==B?void 0:B.content,null==v||null==(s=v.classNames)?void 0:s.content)},o.createElement("div",{"data-title":"",className:w(null==B?void 0:B.title,null==v||null==(c=v.classNames)?void 0:c.title)},v.jsx?v.jsx:"function"==typeof v.title?v.title():v.title),v.description?o.createElement("div",{"data-description":"",className:w(F,eg,null==B?void 0:B.description,null==v||null==(d=v.classNames)?void 0:d.description)},"function"==typeof v.description?v.description():v.description):null),o.isValidElement(v.cancel)?v.cancel:v.cancel&&b(v.cancel)?o.createElement("button",{"data-button":!0,"data-cancel":!0,style:v.cancelButtonStyle||C,onClick:e=>{b(v.cancel)&&ep&&(null==v.cancel.onClick||v.cancel.onClick.call(v.cancel,e),eA())},className:w(null==B?void 0:B.cancelButton,null==v||null==(u=v.classNames)?void 0:u.cancelButton)},v.cancel.label):null,o.isValidElement(v.action)?v.action:v.action&&b(v.action)?o.createElement("button",{"data-button":!0,"data-action":!0,style:v.actionButtonStyle||O,onClick:e=>{b(v.action)&&(null==v.action.onClick||v.action.onClick.call(v.action,e),e.defaultPrevented||eA())},className:w(null==B?void 0:B.actionButton,null==v||null==(p=v.classNames)?void 0:p.actionButton)},v.action.label):null)};function x(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}let T=o.forwardRef(function(e,t){let{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:l,closeButton:s,className:c,offset:d,mobileOffset:u,theme:m="light",richColors:f,duration:p,style:h,visibleToasts:y=3,toastOptions:v,dir:b=x(),gap:w=14,icons:T,containerAriaLabel:S="Notifications"}=e,[k,R]=o.useState([]),P=o.useMemo(()=>Array.from(new Set([a].concat(k.filter(e=>e.position).map(e=>e.position)))),[k,a]),[I,j]=o.useState([]),[A,L]=o.useState(!1),[D,C]=o.useState(!1),[O,N]=o.useState("system"!==m?m:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=o.useRef(null),M=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=o.useRef(null),U=o.useRef(!1),z=o.useCallback(e=>{R(t=>{var r;return(null==(r=t.find(t=>t.id===e.id))?void 0:r.delete)||g.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return o.useEffect(()=>g.subscribe(e=>{if(e.dismiss)return void requestAnimationFrame(()=>{R(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t))});setTimeout(()=>{n.flushSync(()=>{R(t=>{let r=t.findIndex(t=>t.id===e.id);return -1!==r?[...t.slice(0,r),{...t[r],...e},...t.slice(r+1)]:[e,...t]})})})}),[k]),o.useEffect(()=>{if("system"!==m)return void N(m);if("system"===m&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{e?N("dark"):N("light")})}catch(t){e.addListener(({matches:e})=>{try{e?N("dark"):N("light")}catch(e){console.error(e)}})}},[m]),o.useEffect(()=>{k.length<=1&&L(!1)},[k]),o.useEffect(()=>{let e=e=>{var t,r;i.every(t=>e[t]||e.code===t)&&(L(!0),null==(r=F.current)||r.focus()),"Escape"===e.code&&(document.activeElement===F.current||(null==(t=F.current)?void 0:t.contains(document.activeElement)))&&L(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),o.useEffect(()=>{if(F.current)return()=>{_.current&&(_.current.focus({preventScroll:!0}),_.current=null,U.current=!1)}},[F.current]),o.createElement("section",{ref:t,"aria-label":`${S} ${M}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},P.map((t,n)=>{var a;let[i,m]=t.split("-");return k.length?o.createElement("ol",{key:t,dir:"auto"===b?x():b,tabIndex:-1,ref:F,className:c,"data-sonner-toaster":!0,"data-sonner-theme":O,"data-y-position":i,"data-x-position":m,style:{"--front-toast-height":`${(null==(a=I[0])?void 0:a.height)||0}px`,"--width":"356px","--gap":`${w}px`,...h,...function(e,t){let r={};return[e,t].forEach((e,t)=>{let o=1===t,n=o?"--mobile-offset":"--offset",a=o?"16px":"24px";function i(e){["top","right","bottom","left"].forEach(t=>{r[`${n}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?i(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?r[`${n}-${t}`]=a:r[`${n}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):i(a)}),r}(d,u)},onBlur:e=>{U.current&&!e.currentTarget.contains(e.relatedTarget)&&(U.current=!1,_.current&&(_.current.focus({preventScroll:!0}),_.current=null))},onFocus:e=>{!(e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible)&&(U.current||(U.current=!0,_.current=e.relatedTarget))},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{D||L(!1)},onDragEnd:()=>L(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||C(!0)},onPointerUp:()=>C(!1)},k.filter(e=>!e.position&&0===n||e.position===t).map((n,a)=>{var i,c;return o.createElement(E,{key:n.id,icons:T,index:a,toast:n,defaultRichColors:f,duration:null!=(i=null==v?void 0:v.duration)?i:p,className:null==v?void 0:v.className,descriptionClassName:null==v?void 0:v.descriptionClassName,invert:r,visibleToasts:y,closeButton:null!=(c=null==v?void 0:v.closeButton)?c:s,interacting:D,position:t,style:null==v?void 0:v.style,unstyled:null==v?void 0:v.unstyled,classNames:null==v?void 0:v.classNames,cancelButtonStyle:null==v?void 0:v.cancelButtonStyle,actionButtonStyle:null==v?void 0:v.actionButtonStyle,closeButtonAriaLabel:null==v?void 0:v.closeButtonAriaLabel,removeToast:z,toasts:k.filter(e=>e.position==n.position),heights:I.filter(e=>e.position==n.position),setHeights:j,expandByDefault:l,gap:w,expanded:A,swipeDirections:e.swipeDirections})})):null}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(6021),t(9098))),_N_E=e.O()}]);